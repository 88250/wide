{"version":3,"sources":["tabs.js","dialog.js","editors.js","notification.js","tree.js","wide.js","session.js","menu.js","windows.js","hotkeys.js","bottomGroup.js"],"names":["Tabs","obj","_$tabsPanel","$","id","_$tabs","_stack","this","STACKSIZE","_init","_it","each","data","length","splice","push","extend","prototype","_that","on","event","hasClass","setCurrent","clickAfter","parent","isRemove","removeBefore","del","stopPropagation","_hasId","find","add","getCurrentId","$tabsPanel","append","title","content","after","prevId","$tabs","stack","children","remove","i","removeAfter","path","removeClass","hide","addClass","show","setAfter","tId","tree","getTIdByPath","node","fileTree","getNodeByTId","selectNode","wide","curNode","ii","editors","curEditor","editor","cursor","getCursor","setCursor","focus","refreshOutline","text","line","ch","fn","dialog","version","author","dpuuid","Date","getTime","PROP_NAME","Dialog","_defaults","styleClass","background","panel","main","footer","headerMiddle","headerBg","closeIcon","closeIconHover","_attach","target","settings","uuid","inst","_newInst","replace","_getInst","err","_destroyDialog","removeData","prependTo","unwrap","removeAttr","_getDefaults","windowH","window","height","windowW","width","dialogH","parseInt","dialogW","okText","cancelText","footerHTML","headerHTML","hideFooter","hiddenOk","dialogHTML","bgHTML","modal","document","documentElement","scrollHeight","wrap","cloneObj","clone","get","bind","_close","$buttons","undefined","ok","_bindMove","keyup","keyCode","resize","afterInit","className","mousedown","_document","getElementById","x","clientX","style","left","y","clientY","top","ondragstart","onselectstart","onselect","setCapture","captureEvents","Event","MOUSEMOVE","MOUSEUP","onmousemove","positionX","positionY","onmouseup","releaseCapture","css","close","_closeDialog","_openDialog","msg","$dialog","position","afterOpen","_updateDialog","html","defaults","key","theme","styleName","options","otherArgs","Array","slice","call","arguments","shift","apply","concat","jQuery","autocompleteMutex","tabs","getEditorByPath","click","closeOther","currentIndex","firstIndex","_removeAllMarker","removeIndex","_initClose","ZeroClipboard","button","screenX","attr","init","config","label","tip","fileName","file","confirm_save","fmt","doc","isClean","nextId","menu","disabled","cancelSelectedNode","_initCodeMirrorHotKeys","openStartPage","dateFormat","time","date","dateObj","M+","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","q+","Math","floor","S","getMilliseconds","k","test","RegExp","$1","getFullYear","substr","start_page","load","context","wideSessionId","ajax","url","type","dataType","jsonp","success","textStatus","articles","listHTML","community","article","articlePermalink","articleTitle","articleCreateTime","ret","getCurrentPath","currentPath","CodeMirror","registerHelper","word","cur","curLine","getLine","start","end","charAt","request","newWideRequest","code","getValue","cursorLine","cursorCh","autocompleteHints","state","completionActive","async","JSON","stringify","autocompleteArray","displayText","name","class","substring","console","warn","markClean","setTimeout","list","from","Pos","to","commands","autocompleteAfterDot","cm","mode","getMode","Pass","token","getTokenAt","showHint","hint","go","completeSingle","autocompleteAnyWord","auto","gotoLine","doNothing","exprInfo","result","succ","cursorCoords","copyLinesDown","selectoion","listSelections","anchor","head","max","replaceToLine","replaceRange","offset","setSelection","copyLinesUp","moveLinesUp","moveLinesDown","lastLine","jumpToDecl","openFile","findUsages","appendSearch","selectIdentifier","findWordAt","extendSelection","searcHTML","toLowerCase","contents","matches","split","startIndex","endIndex","j","keyWord","search_no_match","$search","find_usages","search_text","bottomGroup","searchTab","$it","half","getScrollInfo","clientHeight","defaultTextHeight","scrollTo","windows","flowBottom","newEditor","iconSkin","undisabled","textArea","value","fromTextArea","lineNumbers","autofocus","autoCloseBrackets","matchBrackets","highlightSelectionMatches","showToken","rulers","color","column","lineStyle","styleActiveLine","editorTheme","tabSize","editorTabSize","indentUnit","indentWithTabs","foldGutter","cursorHeight","readOnly","isGOAPI","profile","extraKeys","Ctrl-\\",".","Ctrl-/","Ctrl-I","Ctrl-L","Ctrl-E","Ctrl-D","Ctrl-B","Ctrl-S","saveFile","Shift-Ctrl-S","saveAllFiles","Shift-Alt-F","Alt-F7","Shift-Alt-Enter","isMaxEditor","restoreEditor","maxEditor","Shift-Ctrl-Up","Shift-Ctrl-Down","Shift-Alt-Up","Shift-Alt-Down","Shift-Alt-J","emmetCodeMirror","$span","evt","altKey","ctrlKey","shiftKey","which","autocomplete","random","setSize","setOption","keymap","notification","_initWS","notificationWS","ReconnectingWebSocket","channel","onopen","log","onmessage","e","parse","$notification","notificationHTML","cmd","severity","message","onclose","onerror","getCurrentNodeLastNode","returnNode","open","getNextShowNode","level","getParentNode","getNextNode","isBottomNode","isLastNode","nodes","transformToArray","getNodes","getOpenPaths","paths","getAllParents","parents","parentTId","isParents","parentPath","parentNode","isDir","indexOf","newFile","it","newDir","removeIt","removable","rename","export","isSucc","crossCompile","platform","decompress","dir","reAsyncChildNodes","refresh","gitClone","import","fileupload","formData","done","fail","$dirRMenu","$fileRMenu","setting","view","showTitle","selectedMulti","enable","autoParam","callback","onDblClick","treeId","treeNode","onRightClick","creatable","display","onClick","clickFlag","zTree","session","restore","_initSearch","_initRename","tempCursor","findModeByFileName","mime","error","$okBtn","closest","prop","trim","val","search","cancel","extension","select","oldPath","newPath","lastIndexOf","curProcessId","outlineHTML","decls","maxj","Ch","Line","Name","dblclick","_initDialog","confirm","delete","create_file","create","fileType","create_dir","goto_file","$list","hotkeys","bindList","$selected","goFileHTML","icoSkin","getClassBySuffix","goto_line","git_clone","repository","outputWS","goLintFound","nextCmd","executable","fillOutput","output","pid","build_n_run","lints","files","lint","lineNo","signal","_initFooter","unbind","subMenu","onbeforeunload","oncontextmenu","_save","getOption","gofmt","beforeSend","resetOutput","stop","run","scrollInfo","setValue","formatted","html_beautify","js_beautify","css_beautify","suffix","ready","getLayoutState","paneState","isClosed","size","setInterval","filse","currentFile","layout","side","outerLayout","west","sideRight","innerLayout","east","bottom","south","latestSessionContent","nodesToOpen","jj","isOpen","l","expandNode","kk","m","mm","n","nn","c","sessionWS","addNodes","isParent","removeNode","_initPreference","_initAbout","_initShare","hover","pic","urls","email","twitterShare","encodeURIComponent","twitter","facebook","googleplus","weibo","qqz","about","wideVersion","uptodate","new_version_available","colon","wideDownload","mouseover","openPreference","closeAllFiles","exit","location","href","openAbout","goget","goinstall","govet","build","isChange","emptys","emptysTip","tabIndex","no_empty","preference","$dialogPreference","$fontFamily","$fontSize","$goFmt","$GoBuildArgsForLinux","$GoBuildArgsForWindows","$GoBuildArgsForDarwin","$workspace","$password","$email","$locale","$theme","$editorFontFamily","$editorFontSize","$editorLineHeight","$editorTheme","$editorTabSize","$keymap","fontFamily","fontSize","goFmt","GoBuildArgsForLinux","GoBuildArgsForWindows","GoBuildArgsForDarwin","workspace","password","locale","editorFontFamily","editorFontSize","editorLineHeight","reload","jqXHR","staticServer","north__paneSelector","center__paneSelector","south__paneSelector","north__size","south__size","spacing_open","north__spacing_open","south__spacing_open","fxSpeed_open","fxSpeed_close","fxSettings_close","easing","fxSettings_open","paneSelector","togglerLength_open","togglerLength_closed","togglerAlign_closed","slideTrigger_open","spacing_closed","minSize","togglerClass","togglerTip_open","min","togglerTip_closed","restore_side","resizerTip","initClosed","center","restore_outline","restore_bottom","ondrag_end","pane","refreshEditor","onresize_end","onclose_end","onopen_end","onshow_end","addCloseBtn","maxSide","maxSideRight","maxBottom","toggleEditor","restoreBottom","restoreSide","restoreSideRight","sizePane","max_editor","editorDatas","slideOpen","defaultKeyMap","goEditor","fun","goFileTree","goOutline","goOutput","goSearch","goNotification","clearWindow","changeEditor","closeCurEditor","goFile","buildRun","$source","enterFun","keydown","index","count","scrollTop","offsetTop","_bindOutput","hotKeys","clear","preventDefault","_bindFileTree","isFirstNode","getPreNode","preNode","nextShowNode","_bindDocument","activeElement","nextPath","currentId","nextTId","_initTabs","_initFrame","$path","mouseup","offsetY","$output","Autolinker","link"],"mappings":"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","file":"wide.min.js","sourcesContent":["/*\n * Copyright (c) 2014-2018, b3log.org & hacpai.com\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * @file tabs.js\n *\n * @author <a href=\"http://vanessa.b3log.org\">Liyuan Li</a>\n * @version 1.0.0.1, Dec 8, 2015\n */\nvar Tabs = function (obj) {\n    obj._$tabsPanel = $(obj.id + \" > .tabs-panel\");\n    obj._$tabs = $(obj.id + \" > .tabs\");\n    obj._stack = [];\n\n    this.obj = obj;\n    this.obj.STACKSIZE = 64;\n\n    this._init(obj);\n\n    // DOM \n    var _it = this;\n    $(obj.id + \" > .tabs > div\").each(function () {\n        var id = $(this).data(\"index\");\n        if (obj._stack.length === _it.obj.STACKSIZE) {\n            obj._stack.splice(0, 1);\n        }\n        if (obj._stack[obj._stack.length - 1] !== id) {\n            _it.obj._stack.push(id);\n        }\n    });\n\n};\n\n$.extend(Tabs.prototype, {\n    _init: function (obj) {\n        var _that = this;\n\n        obj._$tabs.on(\"click\", \"div\", function (event) {\n            if ($(this).hasClass('current')) {\n                return false;\n            }\n\n            var id = $(this).data(\"index\");\n            _that.setCurrent(id);\n            if (typeof (obj.clickAfter) === \"function\") {\n                obj.clickAfter(id);\n            }\n        });\n\n        obj._$tabs.on(\"click\", \".ico-close\", function (event) {\n            var id = $(this).parent().data(\"index\"),\n                    isRemove = true;\n\n            if (typeof obj.removeBefore === 'function') {\n                isRemove = obj.removeBefore(id);\n            }\n\n            if (isRemove) {\n                _that.del(id);\n            }\n            event.stopPropagation();\n        });\n    },\n    _hasId: function (id) {\n        var $tabs = this.obj._$tabs;\n        if ($tabs.find('div[data-index=\"' + id + '\"]').length === 0) {\n            return false;\n        }\n        return true;\n    },\n    add: function (data) {\n        //  tab\n        if (this.getCurrentId() === data.id) {\n            return false;\n        }\n\n        //  tab \n        if (this._hasId(data.id)) {\n            this.setCurrent(data.id);\n            return false;\n        }\n\n        var $tabsPanel = this.obj._$tabsPanel,\n                $tabs = this.obj._$tabs;\n\n        $tabs.append('<div data-index=\"' + data.id + '\">'\n                + data.title + ' <span class=\"ico-close font-ico\"></span></div>');\n        $tabsPanel.append('<div data-index=\"' + data.id + '\">' + data.content\n                + '</div>');\n\n        this.setCurrent(data.id);\n\n        if (typeof data.after === 'function') {\n            data.after();\n        }\n    },\n    del: function (id) {\n        var $tabsPanel = this.obj._$tabsPanel,\n                $tabs = this.obj._$tabs,\n                stack = this.obj._stack,\n                prevId = null;\n\n        $tabs.children(\"div[data-index='\" + id + \"']\").remove();\n        $tabsPanel.children(\"div[data-index='\" + id + \"']\").remove();\n\n        //  id\n        for (var i = 0; i < stack.length; i++) {\n            if (id === stack[i]) {\n                stack.splice(i, 1);\n                i--;\n            }\n        }\n\n        prevId = stack[stack.length - 1];\n\n        if (typeof this.obj.removeAfter === 'function') {\n            this.obj.removeAfter(id, prevId);\n        }\n\n        this.setCurrent(prevId);\n    },\n    getCurrentId: function () {\n        var $tabs = this.obj._$tabs;\n        return $tabs.children(\".current\").data(\"index\");\n    },\n    setCurrent: function (path) {\n        if (!path) {\n            return false;\n        }\n\n        var $tabsPanel = this.obj._$tabsPanel,\n                $tabs = this.obj._$tabs;\n\n        var $currentTab = $tabs.children(\".current\");\n        if ($currentTab.data(\"index\") === path) {\n            return false;\n        }\n\n        // tab \n        var stack = this.obj._stack;\n        if (stack.length === this.obj.STACKSIZE) {\n            stack.splice(0, 1);\n        }\n        if (stack[stack.length - 1] !== path) {\n            this.obj._stack.push(path);\n        }\n\n        $tabs.children(\"div\").removeClass(\"current\");\n        $tabsPanel.children(\"div\").hide();\n\n        $tabs.children('div[data-index=\"' + path + '\"]').addClass(\"current\");\n        $tabsPanel.children('div[data-index=\"' + path + '\"]').show();\n\n        if (typeof this.obj.setAfter === 'function') {\n            this.obj.setAfter();\n        }\n\n        var id = this.getCurrentId();\n        if (\"startPage\" === id) {\n            return;\n        }\n\n        // set tree node selected\n        var tId = tree.getTIdByPath(id);\n        var node = tree.fileTree.getNodeByTId(tId);\n        tree.fileTree.selectNode(node);\n        wide.curNode = node;\n\n        for (var i = 0, ii = editors.data.length; i < ii; i++) {\n            if (editors.data[i].id === id) {\n                wide.curEditor = editors.data[i].editor;\n                break;\n            }\n        }\n\n        if (wide.curEditor) {\n            var cursor = wide.curEditor.getCursor();\n            wide.curEditor.setCursor(cursor);\n            wide.curEditor.focus();\n            wide.refreshOutline();\n\n            $(\".footer .cursor\").text('|   ' + (cursor.line + 1) + ':' + (cursor.ch + 1) + '   |');\n        }\n    }\n});","/*\n * Copyright (c) 2014-2018, b3log.org & hacpai.com\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * @file dialog.js\n *\n * @author <a href=\"http://vanessa.b3log.org\">Liyuan Li</a>\n * @version 1.0.0.1, Dec 8, 2015\n */\n(function ($) {\n    $.fn.extend({\n        dialog: {\n            version: \"0.0.1.7\",\n            author: \"v@b3log.org\"\n        }\n    });\n\n    var dpuuid = new Date().getTime();\n    var PROP_NAME = 'dialog';\n\n    var Dialog = function () {\n        this._defaults = {\n            \"styleClass\": {\n                \"background\": \"dialog-background\",\n                \"panel\": \"dialog-panel\",\n                \"main\": \"dialog-main\",\n                \"footer\": \"dialog-footer\",\n                \"headerMiddle\": \"dialog-header-middle\",\n                \"headerBg\": \"dialog-header-bg\",\n                \"closeIcon\": \"dialog-close-icon\",\n                \"closeIconHover\": \"dialog-close-icon-hover\",\n                \"title\": \"dialog-title\"\n            }\n        };\n    };\n\n    $.extend(Dialog.prototype, {\n        _attach: function (target, settings) {\n            if (!target.id) {\n                this.uuid++;\n                target.id = 'dp' + this.uuid;\n            }\n            var inst = this._newInst($(target));\n\n            inst.settings = $.extend({}, settings || {});\n            $.data(target, PROP_NAME, inst);\n            this._init(target);\n        },\n        /* Create a new instance object. */\n        _newInst: function (target) {\n            // escape jQuery meta chars\n            var id = target[0].id.replace(/([^A-Za-z0-9_])/g, '\\\\\\\\$1');\n            return {\n                id: id\n            };\n        },\n        _getInst: function (target) {\n            try {\n                return $.data(target, PROP_NAME);\n            } catch (err) {\n                throw 'Missing instance data for this dialog';\n            }\n        },\n        _destroyDialog: function (target) {\n            var inst = $.dialog._getInst(target);\n            var id = inst.id;\n            $.removeData(target, PROP_NAME);\n\n            $(target).prependTo(\"#\" + id + \"Wrap\").unwrap();\n            $(target).removeAttr(\"style\");\n\n            var styleClass = this._getDefaults($.dialog._defaults, inst.settings, \"styleClass\");\n            $(\".\" + styleClass.background).remove();\n            $(\"#\" + id + \"Dialog\").remove();\n        },\n        _init: function (target) {\n            var inst = this._getInst(target);\n            var id = inst.id,\n                    settings = inst.settings;\n            var windowH = $(window).height(),\n                    windowW = $(window).width();\n            var styleClass = this._getDefaults($.dialog._defaults, settings, \"styleClass\"),\n                    dialogH = settings.height ? settings.height : parseInt(windowH * 0.6),\n                    dialogW = settings.width ? settings.width : parseInt(windowW * 0.6);\n\n            // get settings or default value.\n            settings.title = settings.title ? settings.title : \"\";\n            settings.okText = settings.okText ? settings.okText : \"Ok\";\n            settings.cancelText = settings.cancelText ? settings.cancelText : \"Cancel\";\n\n            // build HTML.\n            var footerHTML = \"\",\n                    headerHTML = \"<div class='\"\n                    + styleClass.headerBg + \"'><div class='\"\n                    + styleClass.title + \"'>\"\n                    + settings.title + \"</div><a href='javascript:void(0);' class='ico-close font-ico \"\n                    + styleClass.closeIcon + \"'></a></div>\";\n\n            // Sets footerHTML.\n            if (!settings.hideFooter) {\n                if (!settings.hiddenOk) {\n                    footerHTML = \"<button>\" + settings.okText +\n                            \"</button>\";\n                }\n                footerHTML += \"<button>\"\n                        + settings.cancelText + \"</button>\";\n            }\n\n            var dialogHTML = \"<div id='\" + id + \"Dialog' class='\" + styleClass.panel\n                    + \"' style='width: \" + dialogW + \"px;' onselectstart='return false;'>\" + headerHTML\n                    + \"<div class='\" + styleClass.main + \"'><div style='overflow: auto; height: \"\n                    + dialogH + \"px;'></div><div class='\" + styleClass.footer + \"'>\"\n                    + footerHTML + \"</div></div>\";\n\n            var bgHTML = \"\";\n            if (settings.modal && $(\".\" + styleClass.background).length === 0) {\n                var bgHeight = windowH < document.documentElement.scrollHeight\n                        ? document.documentElement.scrollHeight : windowH;\n                bgHTML = \"<div style='height:\" + bgHeight\n                        + \"px;' class='\" + styleClass.background + \"'></div>\";\n            }\n\n            // Package dialog.\n            $(\"#\" + id).wrap(\"<div id='\" + id + \"Wrap'></div>\");\n            var cloneObj = $(target).clone(true);\n            $(target).remove();\n            $('body').append(bgHTML + dialogHTML);\n            $($(\"#\" + id + \"Dialog .\" + styleClass.main + \" div\").get(0)).append(cloneObj);\n            $(cloneObj).show();\n\n            // Bind event.\n            $(\"#\" + id + \"Dialog .\" + styleClass.closeIcon).bind(\"click\", function () {\n                $.dialog._close(id, settings);\n            });\n\n            var $buttons = $(\"#\" + id + \"Dialog .\" + styleClass.footer + \" button\");\n            $($buttons.get(1)).bind(\"click\", function () {\n                $.dialog._close(id, settings);\n            });\n\n            $($buttons.get(0)).bind(\"click\", function () {\n                if (settings.ok === undefined || settings.ok()) {\n                    $.dialog._close(id, settings);\n                }\n            });\n\n            this._bindMove(id, styleClass.headerBg, dialogH, dialogW);\n\n            // esc exit\n            $(window).keyup(function (event) {\n                if (event.keyCode === 27) {\n                    $.dialog._close(id, settings);\n                }\n            });\n\n            $(window).resize(function () {\n                var height = $(\"body\").height() > $(window).height() ? $(\"body\").height() : $(window).height();\n                $(\".dialog-background\").height(height);\n            });\n\n            if (typeof settings.afterInit === \"function\") {\n                settings.afterInit();\n            }\n        },\n        _bindMove: function (id, className) {\n            $(\"#\" + id + \"Dialog .\" + className).mousedown(function (event) {\n                var _document = document;\n                if (!event) {\n                    event = window.event;\n                }\n                var dialog = document.getElementById(id + \"Dialog\");\n                var x = event.clientX - parseInt(dialog.style.left),\n                        y = event.clientY - parseInt(dialog.style.top);\n                _document.ondragstart = \"return false;\";\n                _document.onselectstart = \"return false;\";\n                _document.onselect = \"document.selection.empty();\";\n\n                if (this.setCapture) {\n                    this.setCapture();\n                } else if (window.captureEvents) {\n                    window.captureEvents(Event.MOUSEMOVE | Event.MOUSEUP);\n                }\n\n                _document.onmousemove = function (event) {\n                    if (!event) {\n                        event = window.event;\n                    }\n                    var positionX = event.clientX - x,\n                            positionY = event.clientY - y;\n                    if (positionX < 0) {\n                        positionX = 0;\n                    }\n                    if (positionX > $(window).width() - $(dialog).width()) {\n                        positionX = $(window).width() - $(dialog).width();\n                    }\n                    if (positionY > $(window).height() - $(dialog).height()) {\n                        positionY = $(window).height() - $(dialog).height();\n                    }\n                    if (positionY < 0) {\n                        positionY = 0;\n                    }\n                    dialog.style.left = positionX + \"px\";\n                    dialog.style.top = positionY + \"px\";\n                };\n\n                _document.onmouseup = function () {\n                    if (this.releaseCapture) {\n                        this.releaseCapture();\n                    } else if (window.captureEvents) {\n                        window.captureEvents(Event.MOUSEMOVE | Event.MOUSEUP);\n                    }\n                    _document.onmousemove = null;\n                    _document.onmouseup = null;\n                    _document.ondragstart = null;\n                    _document.onselectstart = null;\n                    _document.onselect = null;\n                };\n            });\n        },\n        _close: function (id, settings) {\n            if ($(\"#\" + id + \"Dialog\").css(\"display\") === \"none\") {\n                return;\n            }\n            if (settings.close === undefined || settings.close()) {\n                $(\"#\" + id + \"Dialog\").hide();\n                if (settings.modal) {\n                    var styleClass = this._getDefaults($.dialog._defaults, settings, \"styleClass\");\n                    $(\".\" + styleClass.background).hide();\n                }\n            }\n        },\n        _closeDialog: function (target) {\n            var inst = this._getInst(target);\n            var id = inst.id,\n                    settings = inst.settings;\n            $.dialog._close(id, settings);\n        },\n        _openDialog: function (target, msg) {\n            var inst = this._getInst(target);\n            var id = inst.id,\n                    settings = inst.settings,\n                    top = \"\", left = \"\",\n                    $dialog = $(\"#\" + id + \"Dialog\"),\n                    windowH = $(window).height(),\n                    windowW = $(window).width(),\n                    dialogH = settings.height ? settings.height : parseInt(windowH * 0.6),\n                    dialogW = settings.width ? settings.width : parseInt(windowW * 0.6);\n\n            // Sets position.\n            if (settings.position) {\n                top = settings.position.top;\n                left = settings.position.left;\n            } else {\n                // 20(footer) + 23(header)\n                top = parseInt((windowH - dialogH - 43) / 2);\n                if (top < 0) {\n                    top = 0;\n                }\n                left = parseInt((windowW - dialogW) / 2);\n            }\n            $dialog.css({\n                \"top\": top + \"px\",\n                \"left\": left + \"px\"\n            }).show();\n\n            if (settings.modal) {\n                var styleClass = this._getDefaults($.dialog._defaults, settings, \"styleClass\");\n                $(\".\" + styleClass.background).show();\n            }\n\n            if (typeof settings.afterOpen === \"function\") {\n                settings.afterOpen(msg);\n            }\n\n            $(\"#\" + id + \"Dialog .dialog-footer button:eq(0)\").focus();\n        },\n        _updateDialog: function (target, data) {\n            var inst = this._getInst(target);\n            var id = inst.id,\n                    settings = inst.settings;\n            var styleClass = this._getDefaults($.dialog._defaults, settings, \"styleClass\");\n            $.extend(settings, data);\n            var $dialog = $(\"#\" + id + \"Dialog\");\n            if (data.position) {\n                $dialog.css({\n                    \"top\": data.position.top,\n                    \"left\": data.position.left\n                });\n            }\n\n            if (data.width) {\n                $dialog.width(data.width + 26);\n                $dialog.find(\".\" + styleClass.main + \" div\")[0].style.width = data.width + \"px\";\n                $dialog.find(\".\" + styleClass.headerBg).width(data.width + 18);\n            }\n\n            if (data.height) {\n                $dialog.find(\".\" + styleClass.main + \" div\")[0].style.height = data.height + \"px\";\n            }\n\n            if (data.title) {\n                $dialog.find(\".\" + styleClass.title).html(data.title);\n            }\n\n            if (data.modal !== undefined) {\n                if (data.modal) {\n                    $(\".\" + styleClass.background).show();\n                } else {\n                    $(\".\" + styleClass.background).hide();\n                }\n            }\n\n            if (data.hideFooter !== undefined) {\n                if (data.hideFooter) {\n                    $dialog.find(\".\" + styleClass.footer).hide();\n                } else {\n                    $dialog.find(\".\" + styleClass.footer).show();\n                }\n            }\n\n        },\n        _getDefaults: function (defaults, settings, key) {\n            if (key === \"styleClass\") {\n                if (settings.theme === \"default\" || settings.theme === undefined) {\n                    return defaults.styleClass;\n                }\n                settings.styleClass = {};\n                for (var styleName in defaults[key]) {\n                    settings.styleClass[styleName] = settings.theme + \"-\" + defaults.styleClass[styleName];\n                }\n            } else if (key === \"height\" || key === \"width\") {\n                if (settings[key] === null || settings[key] === undefined) {\n                    return \"auto\";\n                } else {\n                    return settings[key] + \"px\";\n                }\n            } else {\n                if (settings[key] === null || settings[key] === undefined) {\n                    return defaults[key];\n                }\n            }\n            return settings[key];\n        }\n    });\n\n    $.fn.dialog = function (options) {\n        var otherArgs = Array.prototype.slice.call(arguments);\n\n        if (typeof options === 'string') {\n            otherArgs.shift();\n            return $.dialog['_' + options + 'Dialog'].apply($.dialog, [this[0]].concat(otherArgs));\n        }\n        return this.each(function () {\n            $.dialog._attach(this, options);\n        });\n    };\n\n    $.dialog = new Dialog();\n\n    // Add another global to avoid noConflict issues with inline event handlers\n    window['DP_jQuery_' + dpuuid] = $;\n})(jQuery);","/*\n * Copyright (c) 2014-2018, b3log.org & hacpai.com\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * @file editor.js\n *\n * @author <a href=\"http://vanessa.b3log.org\">Liyuan Li</a>\n * @author <a href=\"http://88250.b3log.org\">Liang Ding</a>\n * @version 1.1.1.0, Jan 12, 2016\n */\nvar editors = {\n    autocompleteMutex: false,\n    data: [],\n    tabs: {},\n    getEditorByPath: function (path) {\n        for (var i = 0, ii = editors.data.length; i < ii; i++) {\n            if (editors.data[i].editor.options.path === path) {\n                return editors.data[i].editor;\n            }\n        }\n    },\n    close: function () {\n        $('.edit-panel .tabs > div[data-index=\"' + $('.edit-panel .frame').data('index') + ']').find('.ico-close').click();\n    },\n    closeOther: function () {\n        var currentIndex = $(\".edit-panel .frame\").data(\"index\");\n\n        // \n        var removeData = [];\n        $(\".edit-panel .tabs > div\").each(function (i) {\n            if (currentIndex !== $(this).data(\"index\")) {\n                removeData.push($(this).data(\"index\"));\n            }\n        });\n        if (removeData.length === 0) {\n            return false;\n        }\n        var firstIndex = removeData.splice(0, 1);\n        $(\"#dialogCloseEditor\").data(\"removeData\", removeData);\n        // \n        $('.edit-panel .tabs > div[data-index=\"' + firstIndex + '\"]').find(\".ico-close\").click();\n    },\n    _removeAllMarker: function () {\n        var removeData = $(\"#dialogCloseEditor\").data(\"removeData\");\n        if (removeData && removeData.length > 0) {\n            var removeIndex = removeData.splice(0, 1);\n            $(\"#dialogCloseEditor\").data(\"removeData\", removeData);\n            $('.edit-panel .tabs > div[data-index=\"' + removeIndex + '\"] .ico-close').click();\n        }\n        if (wide.curEditor) {\n            wide.curEditor.focus();\n        }\n    },\n    _initClose: function () {\n        new ZeroClipboard($(\"#copyFilePath\"));\n\n        // \n        $(\".edit-panel\").on(\"mouseup\", '.tabs > div', function (event) {\n            event.stopPropagation();\n\n            if (event.button === 0) { // \n                $(\".edit-panel .frame\").hide();\n                return false;\n            }\n\n            // event.button === 2 \n            var left = event.screenX;\n            if ($(\".side\").css(\"left\") === \"auto\" || $(\".side\").css(\"left\") === \"0px\") {\n                left = event.screenX - $(\".side\").width();\n            }\n            $(\".edit-panel .frame\").show().css({\n                \"left\": left + \"px\",\n                \"top\": \"21px\"\n            }).data('index', $(this).data(\"index\"));\n\n            $(\"#copyFilePath\").attr('data-clipboard-text', $(this).find(\"span:eq(0)\").attr(\"title\"));\n            return false;\n        });\n    },\n    init: function () {\n        $(\"#dialogCloseEditor\").dialog({\n            \"modal\": true,\n            \"height\": 90,\n            \"width\": 260,\n            \"title\": config.label.tip,\n            \"hideFooter\": true,\n            \"afterOpen\": function (fileName) {\n                $(\"#dialogCloseEditor > div:eq(0)\").html(config.label.file\n                        + ' <b>' + fileName + '</b>. ' + config.label.confirm_save + '?');\n                $(\"#dialogCloseEditor button:eq(0)\").focus();\n            },\n            \"afterInit\": function () {\n                $(\"#dialogCloseEditor button.save\").click(function () {\n                    var i = $(\"#dialogCloseEditor\").data(\"index\");\n                    wide.fmt(editors.data[i].id, editors.data[i].editor);\n                    editors.tabs.del(editors.data[i].id);\n                    $(\"#dialogCloseEditor\").dialog(\"close\");\n                    editors._removeAllMarker();\n                });\n\n                $(\"#dialogCloseEditor button.discard\").click(function () {\n                    var i = $(\"#dialogCloseEditor\").data(\"index\");\n                    editors.tabs.del(editors.data[i].id);\n                    $(\"#dialogCloseEditor\").dialog(\"close\");\n                    editors._removeAllMarker();\n                });\n\n                $(\"#dialogCloseEditor button.cancel\").click(function (event) {\n                    $(\"#dialogCloseEditor\").dialog(\"close\");\n                    editors._removeAllMarker();\n                });\n            }\n        });\n\n        editors.tabs = new Tabs({\n            id: \".edit-panel\",\n            setAfter: function () {\n                if (wide.curEditor) {\n                    wide.curEditor.focus();\n                }\n            },\n            clickAfter: function (id) {\n                if (id === 'startPage') {\n                    wide.curEditor = undefined;\n                    $(\".footer .cursor\").text('');\n                    wide.refreshOutline();\n                    \n                    return false;\n                }\n            },\n            removeBefore: function (id) {\n                if (id === 'startPage') { //  tab \n                    editors._removeAllMarker();\n                    return true;\n                }\n\n                for (var i = 0, ii = editors.data.length; i < ii; i++) {\n                    if (editors.data[i].id === id) {\n                        if (editors.data[i].editor.doc.isClean()) {\n                            editors._removeAllMarker();\n                            return true;\n                        } else {\n                            $(\"#dialogCloseEditor\").dialog(\"open\", $('.edit-panel .tabs > div[data-index=\"'\n                                    + editors.data[i].id + '\"] > span:eq(0)').text());\n                            $(\"#dialogCloseEditor\").data(\"index\", i);\n                            return false;\n                        }\n\n                        break;\n                    }\n                }\n            },\n            removeAfter: function (id, nextId) {\n                if ($(\".edit-panel .tabs > div\").length === 0) {\n                    //  tab  disables \n                    menu.disabled(['close-all']);\n                }\n\n                // \n                for (var i = 0, ii = editors.data.length; i < ii; i++) {\n                    if (editors.data[i].id === id) {\n                        editors.data.splice(i, 1);\n                        break;\n                    }\n                }\n\n                if (editors.data.length === 0) { // \n                    menu.disabled(['save-all', 'build', 'run', 'go-test', 'go-vet', 'go-get', 'go-install',\n                        'find', 'find-next', 'find-previous', 'replace', 'replace-all',\n                        'format', 'autocomplete', 'jump-to-decl', 'expr-info', 'find-usages', 'toggle-comment',\n                        'edit']);\n\n                    // remove selected tree node\n                    tree.fileTree.cancelSelectedNode();\n                    wide.curNode = undefined;\n                    wide.curEditor = undefined;\n                    wide.refreshOutline();\n                    $(\".footer .cursor\").text('');\n                    return false;\n                }\n\n                if (!nextId) {\n                    //  Tab\n                    // remove selected tree node\n                    tree.fileTree.cancelSelectedNode();\n                    wide.curNode = undefined;\n                    wide.curEditor = undefined;\n                    wide.refreshOutline();\n                    $(\".footer .cursor\").text('');\n                    return false;\n                }\n\n                if (nextId === editors.tabs.getCurrentId()) {\n                    // \n                    return false;\n                }\n            }\n        });\n\n        this._initCodeMirrorHotKeys();\n        this.openStartPage();\n        this._initClose();\n    },\n    openStartPage: function () {\n        wide.curEditor = undefined;\n        wide.refreshOutline();\n        $(\".footer .cursor\").text('');\n\n        var dateFormat = function (time, fmt) {\n            var date = new Date(time);\n            var dateObj = {\n                \"M+\": date.getMonth() + 1, // \n                \"d+\": date.getDate(), // \n                \"h+\": date.getHours(), // \n                \"m+\": date.getMinutes(), // \n                \"s+\": date.getSeconds(), // \n                \"q+\": Math.floor((date.getMonth() + 3) / 3), // \n                \"S\": date.getMilliseconds() // \n            };\n            if (/(y+)/.test(fmt))\n                fmt = fmt.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n            for (var k in dateObj)\n                if (new RegExp(\"(\" + k + \")\").test(fmt)) {\n                    fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1)\n                            ? (dateObj[k]) : ((\"00\" + dateObj[k]).substr((\"\" + dateObj[k]).length)));\n                }\n            return fmt;\n        };\n\n        editors.tabs.add({\n            id: \"startPage\",\n            title: '<span title=\"' + config.label.start_page\n                    + '\"><span class=\"ico-start font-ico\"></span> ' + config.label.start_page + '</span>',\n            content: '<div id=\"startPage\"></div>',\n            after: function () {\n                $(\"#startPage\").load(config.context + '/start?sid=' + config.wideSessionId);\n                $.ajax({\n                    url: \"https://hacpai.com/apis/articles?tags=wide,golang&p=1&size=20\",\n                    type: \"GET\",\n                    dataType: \"jsonp\",\n                    jsonp: \"callback\",\n                    success: function (data, textStatus) {\n                        var articles = data.articles;\n                        if (0 === articles.length) {\n                            return;\n                        }\n\n                        //  size = 20  9 \n                        var length = articles.length;\n                        if (length > 9) {\n                            length = 9;\n                        }\n\n                        var listHTML = \"<ul><li class='title'>\" + config.label.community +\n                            \"<a href='https://hacpai.com/article/1437497122181' target='_blank' class='fn-right'></li>\";\n                        for (var i = 0; i < length; i++) {\n                            var article = articles[i];\n                            listHTML += \"<li>\"\n                                    + \"<a target='_blank' href='\"\n                                    + article.articlePermalink + \"'>\"\n                                    + article.articleTitle + \"</a>&nbsp; <span class='date'>\"\n                                    + dateFormat(article.articleCreateTime, 'yyyy-MM-dd');\n                            +\"</span></li>\";\n                        }\n\n                        $(\"#startPage .news\").html(listHTML + \"</ul>\");\n                    }\n                });\n            }\n        });\n    },\n    getCurrentId: function () {\n        var ret = editors.tabs.getCurrentId();\n        if (ret === 'startPage') {\n            ret = null;\n        }\n        \n        return ret;\n    },\n    getCurrentPath: function () {\n        var currentPath = $(\".edit-panel .tabs .current span:eq(0)\").attr(\"title\");\n        if (currentPath === config.label.start_page) {\n            currentPath = null;\n        }\n        return currentPath;\n    },\n    _initCodeMirrorHotKeys: function () {\n        CodeMirror.registerHelper(\"hint\", \"go\", function (editor) {\n            editor = wide.curEditor; // \n            var word = /[\\w$]+/;\n\n            var cur = editor.getCursor(), curLine = editor.getLine(cur.line);\n\n            var start = cur.ch, end = start;\n            while (end < curLine.length && word.test(curLine.charAt(end))) {\n                ++end;\n            }\n            while (start && word.test(curLine.charAt(start - 1))) {\n                --start;\n            }\n\n            var request = newWideRequest();\n            request.path = $(\".edit-panel .tabs .current > span:eq(0)\").attr(\"title\");\n            request.code = editor.getValue();\n            request.cursorLine = cur.line;\n            request.cursorCh = cur.ch;\n\n            var autocompleteHints = [];\n\n            if (editors.autocompleteMutex && editor.state.completionActive) {\n                return;\n            }\n\n            editors.autocompleteMutex = true;\n\n            $.ajax({\n                async: false, // \n                type: 'POST',\n                url: config.context + '/autocomplete',\n                data: JSON.stringify(request),\n                dataType: \"json\",\n                success: function (data) {\n                    var autocompleteArray = data[1];\n\n                    if (autocompleteArray) {\n                        for (var i = 0; i < autocompleteArray.length; i++) {\n                            var displayText = '',\n                                    text = autocompleteArray[i].name;\n\n                            switch (autocompleteArray[i].class) {\n                                case \"type\":\n                                    displayText = '<span class=\"fn-clear\"><span class=\"ico-type ico\"></span>'// + autocompleteArray[i].class \n                                            + '<b>' + autocompleteArray[i].name + '</b>    '\n                                            + autocompleteArray[i].type + '</span>';\n                                    break;\n                                case \"const\":\n                                    displayText = '<span class=\"fn-clear\"><span class=\"ico-const ico\"></span>'// + autocompleteArray[i].class \n                                            + '<b>' + autocompleteArray[i].name + '</b>    '\n                                            + autocompleteArray[i].type + '</span>';\n                                    break;\n                                case \"var\":\n                                    displayText = '<span class=\"fn-clear\"><span class=\"ico-var ico\"></span>'// + autocompleteArray[i].class \n                                            + '<b>' + autocompleteArray[i].name + '</b>    '\n                                            + autocompleteArray[i].type + '</span>';\n                                    break;\n                                case \"package\":\n                                    displayText = '<span class=\"fn-clear\"><span class=\"ico-package ico\"></span>'// + autocompleteArray[i].class \n                                            + '<b>' + autocompleteArray[i].name + '</b>    '\n                                            + autocompleteArray[i].type + '</span>';\n                                    break;\n                                case \"func\":\n                                    displayText = '<span><span class=\"ico-func ico\"></span>'// + autocompleteArray[i].class \n                                            + '<b>' + autocompleteArray[i].name + '</b>'\n                                            + autocompleteArray[i].type.substring(4) + '</span>';\n                                    text += '()';\n                                    break;\n                                default:\n                                    console.warn(\"Can't handle autocomplete [\" + autocompleteArray[i].class + \"]\");\n                                    break;\n                            }\n\n                            autocompleteHints[i] = {\n                                displayText: displayText,\n                                text: text\n                            };\n                        }\n                    }\n\n                    editor.doc.markClean();\n                    $(\".edit-panel .tabs .current > span:eq(0)\").removeClass(\"changed\");\n                }\n            });\n\n            setTimeout(function () {\n                editors.autocompleteMutex = false;\n            }, 20);\n\n            return {list: autocompleteHints, from: CodeMirror.Pos(cur.line, start), to: CodeMirror.Pos(cur.line, end)};\n        });\n\n        CodeMirror.commands.autocompleteAfterDot = function (cm) {\n            var mode = cm.getMode();\n            if (mode && \"go\" !== mode.name) {\n                return CodeMirror.Pass;\n            }\n\n            var token = cm.getTokenAt(cm.getCursor());\n\n            if (\"comment\" === token.type || \"string\" === token.type) {\n                return CodeMirror.Pass;\n            }\n\n            setTimeout(function () {\n                if (!cm.state.completionActive) {\n                    cm.showHint({hint: CodeMirror.hint.go, completeSingle: false});\n                }\n            }, 50);\n\n            return CodeMirror.Pass;\n        };\n\n        CodeMirror.commands.autocompleteAnyWord = function (cm) {\n            cm.showHint({hint: CodeMirror.hint.auto});\n        };\n\n        CodeMirror.commands.gotoLine = function (cm) {\n            $(\"#dialogGoLinePrompt\").dialog(\"open\");\n        };\n\n        //  cm .\n        CodeMirror.commands.doNothing = function (cm) {\n        };\n\n        CodeMirror.commands.exprInfo = function (cm) {\n            var cur = wide.curEditor.getCursor();\n\n            var request = newWideRequest();\n            request.path = $(\".edit-panel .tabs .current > span:eq(0)\").attr(\"title\");\n            request.code = wide.curEditor.getValue();\n            request.cursorLine = cur.line;\n            request.cursorCh = cur.ch;\n\n            $.ajax({\n                type: 'POST',\n                url: config.context + '/exprinfo',\n                data: JSON.stringify(request),\n                dataType: \"json\",\n                success: function (result) {\n                    if (!result.succ) {\n                        return;\n                    }\n                    \n                    var position = wide.curEditor.cursorCoords();\n                    $(\"body\").append('<div style=\"top:'\n                            + (position.top + 15) + 'px;left:' + position.left\n                            + 'px\" class=\"edit-exprinfo\">' + result.data + '</div>');\n                }\n            });\n        };\n\n        CodeMirror.commands.copyLinesDown = function (cm) {\n            var content = '',\n                    selectoion = cm.listSelections()[0];\n\n            var from = selectoion.anchor,\n                    to = selectoion.head;\n            if (from.line > to.line) {\n                from = selectoion.head;\n                to = selectoion.anchor;\n            }\n\n            for (var i = from.line, max = to.line; i <= max; i++) {\n                if (to.ch !== 0 || i !== max) { // 0\n                    content += '\\n' + cm.getLine(i);\n                }\n            }\n            // 0\n            var replaceToLine = to.line;\n            if (to.ch === 0) {\n                replaceToLine = to.line - 1;\n            }\n            cm.replaceRange(content, CodeMirror.Pos(replaceToLine));\n\n            var offset = replaceToLine - from.line + 1;\n            cm.setSelection(CodeMirror.Pos(from.line + offset, from.ch),\n                    CodeMirror.Pos(to.line + offset, to.ch));\n        };\n\n        CodeMirror.commands.copyLinesUp = function (cm) {\n            var content = '',\n                    selectoion = cm.listSelections()[0];\n\n            var from = selectoion.anchor,\n                    to = selectoion.head;\n            if (from.line > to.line) {\n                from = selectoion.head;\n                to = selectoion.anchor;\n            }\n\n            for (var i = from.line, max = to.line; i <= max; i++) {\n                if (to.ch !== 0 || i !== max) { // 0\n                    content += '\\n' + cm.getLine(i);\n                }\n            }\n\n            // 0\n            var replaceToLine = to.line;\n            if (to.ch === 0) {\n                replaceToLine = to.line - 1;\n            }\n            cm.replaceRange(content, CodeMirror.Pos(replaceToLine));\n\n            cm.setSelection(CodeMirror.Pos(from.line, from.ch),\n                    CodeMirror.Pos(to.line, to.ch));\n        };\n\n        CodeMirror.commands.moveLinesUp = function (cm) {\n            var selectoion = cm.listSelections()[0];\n\n            var from = selectoion.anchor,\n                    to = selectoion.head;\n            if (from.line > to.line) {\n                from = selectoion.head;\n                to = selectoion.anchor;\n            }\n\n            if (from.line === 0) {\n                return false;\n            }\n            // 0\n            var replaceToLine = to.line;\n            if (to.ch === 0) {\n                replaceToLine = to.line - 1;\n            }\n            cm.replaceRange('\\n' + cm.getLine(from.line - 1), CodeMirror.Pos(replaceToLine));\n            if (from.line === 1) {\n                // \n                cm.replaceRange('', CodeMirror.Pos(0, 0),\n                        CodeMirror.Pos(1, 0));\n            } else {\n                cm.replaceRange('', CodeMirror.Pos(from.line - 2, cm.getLine(from.line - 2).length),\n                        CodeMirror.Pos(from.line - 1, cm.getLine(from.line - 1).length));\n            }\n\n            cm.setSelection(CodeMirror.Pos(from.line - 1, from.ch),\n                    CodeMirror.Pos(to.line - 1, to.ch));\n        };\n\n        CodeMirror.commands.moveLinesDown = function (cm) {\n            var selectoion = cm.listSelections()[0];\n\n            var from = selectoion.anchor,\n                    to = selectoion.head;\n            if (from.line > to.line) {\n                from = selectoion.head;\n                to = selectoion.anchor;\n            }\n\n            if (to.line === cm.lastLine()) {\n                return false;\n            }\n\n            // 0\n            var replaceToLine = to.line;\n            if (to.ch === 0) {\n                replaceToLine = to.line - 1;\n            }\n            // \n            if (from.line === 0) {\n                cm.replaceRange(cm.getLine(replaceToLine + 1) + '\\n', CodeMirror.Pos(0, 0));\n            } else {\n                cm.replaceRange('\\n' + cm.getLine(replaceToLine + 1), CodeMirror.Pos(from.line - 1));\n            }\n            // \n            cm.replaceRange('', CodeMirror.Pos(replaceToLine + 1, cm.getLine(replaceToLine + 1).length),\n                    CodeMirror.Pos(replaceToLine + 2, cm.getLine(replaceToLine + 2).length));\n\n            cm.setSelection(CodeMirror.Pos(from.line + 1, from.ch),\n                    CodeMirror.Pos(to.line + 1, to.ch));\n        };\n\n        CodeMirror.commands.jumpToDecl = function (cm) {\n            var cur = wide.curEditor.getCursor();\n\n            var request = newWideRequest();\n            request.path = $(\".edit-panel .tabs .current > span:eq(0)\").attr(\"title\");\n            request.code = wide.curEditor.getValue();\n            request.cursorLine = cur.line;\n            request.cursorCh = cur.ch;\n\n            $.ajax({\n                type: 'POST',\n                url: config.context + '/find/decl',\n                data: JSON.stringify(request),\n                dataType: \"json\",\n                success: function (result) {\n                    if (!result.succ) {\n                        return;\n                    }\n                    \n                    var data = result.data;\n\n                    var tId = tree.getTIdByPath(data.path);\n                    wide.curNode = tree.fileTree.getNodeByTId(tId);\n                    tree.fileTree.selectNode(wide.curNode);\n\n                    tree.openFile(wide.curNode, CodeMirror.Pos(data.cursorLine - 1, data.cursorCh - 1));\n                }\n            });\n        };\n\n        CodeMirror.commands.findUsages = function (cm) {\n            var cur = wide.curEditor.getCursor();\n\n            var request = newWideRequest();\n            request.path = $(\".edit-panel .tabs .current > span:eq(0)\").attr(\"title\");\n            request.code = wide.curEditor.getValue();\n            request.cursorLine = cur.line;\n            request.cursorCh = cur.ch;\n\n            $.ajax({\n                type: 'POST',\n                url: config.context + '/find/usages',\n                data: JSON.stringify(request),\n                dataType: \"json\",\n                success: function (result) {\n                    if (!result.succ) {\n                        return;\n                    }\n\n                    editors.appendSearch(result.data, 'usages', '');\n                }\n            });\n        };\n\n        CodeMirror.commands.selectIdentifier = function (cm) {\n            var cur = cm.getCursor();\n            var word = cm.findWordAt(cur);\n            cm.extendSelection(word.anchor, word.head);\n        };\n    },\n    appendSearch: function (data, type, key) {\n        var searcHTML = '<ul class=\"list\">',\n                key = key.toLowerCase();\n\n        for (var i = 0, ii = data.length; i < ii; i++) {\n            var contents = '',\n                    lowerCaseContents = data[i].contents[0].toLowerCase(),\n                    matches = lowerCaseContents.split(key),\n                    startIndex = 0,\n                    endIndex = 0;\n            for (var j = 0, max = matches.length; j < max; j++) {\n                startIndex = endIndex + matches[j].length;\n                endIndex = startIndex + key.length;\n                var keyWord = data[i].contents[0].substring(startIndex, endIndex);\n                if (keyWord !== '') {\n                    keyWord = '<b>' + keyWord + '</b>';\n                }\n                contents += data[i].contents[0].substring(startIndex - matches[j].length, startIndex) + keyWord;\n            }\n\n            searcHTML += '<li title=\"' + data[i].path + '\">'\n                    + contents + \"&nbsp;&nbsp;&nbsp;&nbsp;<span class='ft-small'>\" + data[i].path\n                    + '<i class=\"position\" data-line=\"'\n                    + data[i].line + '\" data-ch=\"' + data[i].ch + '\"> (' + data[i].line + ':'\n                    + data[i].ch + ')</i></span></li>';\n        }\n\n        if (data.length === 0) {\n            searcHTML += '<li>' + config.label.search_no_match + '</li>';\n        }\n        searcHTML += '</ul>';\n\n        var $search = $('.bottom-window-group .search'),\n                title = config.label.find_usages;\n        if (type === \"founds\") {\n            title = config.label.search_text;\n        }\n        if ($search.find(\"ul\").length === 0) {\n            bottomGroup.searchTab = new Tabs({\n                id: \".bottom-window-group .search\",\n                removeAfter: function (id, prevId) {\n                    if ($search.find(\"ul\").length === 1) {\n                        $search.find(\".tabs\").hide();\n                    }\n                }\n            });\n\n            $search.on(\"click\", \"li\", function () {\n                $search.find(\"li\").removeClass(\"selected\");\n                $(this).addClass(\"selected\");\n            });\n\n            $search.on(\"dblclick\", \"li\", function () {\n                var $it = $(this),\n                        tId = tree.getTIdByPath($it.attr(\"title\"));\n                tree.openFile(tree.fileTree.getNodeByTId(tId));\n                tree.fileTree.selectNode(wide.curNode);\n\n                var line = $it.find(\".position\").data(\"line\") - 1;\n                var cursor = CodeMirror.Pos(line, $it.find(\".position\").data(\"ch\") - 1);\n\n\n                var editor = wide.curEditor;\n                editor.setCursor(cursor);\n\n                var half = Math.floor(editor.getScrollInfo().clientHeight / editor.defaultTextHeight() / 2);\n                var cursorCoords = editor.cursorCoords({line: cursor.line - half, ch: 0}, \"local\");\n                editor.scrollTo(0, cursorCoords.top);\n\n                wide.curEditor.focus();\n            });\n\n            $search.find(\".tabs-panel > div\").append(searcHTML);\n\n            $search.find(\".tabs .first\").text(title);\n        } else {\n            $search.find(\".tabs\").show();\n            bottomGroup.searchTab.add({\n                \"id\": \"search\" + (new Date()).getTime(),\n                \"title\": title,\n                \"content\": searcHTML\n            });\n        }\n\n        // focus\n        bottomGroup.tabs.setCurrent(\"search\");\n        windows.flowBottom();\n        $(\".bottom-window-group .search\").focus();\n    },\n    //  Tab Tab  Tab.\n    newEditor: function (data, cursor) {\n        var id = wide.curNode.id;\n\n        editors.tabs.add({\n            id: id,\n            title: '<span title=\"' + wide.curNode.path + '\"><span class=\"'\n                    + wide.curNode.iconSkin + 'ico\"></span>' + wide.curNode.name + '</span>',\n            content: '<textarea id=\"editor' + id + '\"></textarea>'\n        });\n\n        menu.undisabled(['save-all', 'close-all', 'build', 'run', 'go-test', 'go-vet', 'go-get', 'go-install',\n            'find', 'find-next', 'find-previous', 'replace', 'replace-all',\n            'format', 'autocomplete', 'jump-to-decl', 'expr-info', 'find-usages', 'toggle-comment',\n            'edit']);\n\n        var textArea = document.getElementById(\"editor\" + id);\n        textArea.value = data.content;\n\n        var editor = CodeMirror.fromTextArea(textArea, {\n            lineNumbers: true,\n            autofocus: true,\n            autoCloseBrackets: true,\n            matchBrackets: true,\n            highlightSelectionMatches: {showToken: /\\w/},\n            rulers: [{color: \"#ccc\", column: 120, lineStyle: \"dashed\"}],\n            styleActiveLine: true,\n            theme: config.editorTheme,\n            tabSize: config.editorTabSize,\n            indentUnit: 4,\n            indentWithTabs: true,\n            foldGutter: true,\n            cursorHeight: 1,\n            path: data.path,\n            readOnly: wide.curNode.isGOAPI,\n            profile: 'xhtml', // define Emmet output profile\n            extraKeys: {\n                \"Ctrl-\\\\\": \"autocompleteAnyWord\",\n                \".\": \"autocompleteAfterDot\",\n                \"Ctrl-/\": 'toggleComment',\n                \"Ctrl-I\": \"exprInfo\",\n                \"Ctrl-L\": \"gotoLine\",\n                \"Ctrl-E\": \"deleteLine\",\n                \"Ctrl-D\": \"doNothing\", //  deleteLine\n                \"Ctrl-B\": \"jumpToDecl\",\n                \"Ctrl-S\": function () {\n                    wide.saveFile();\n                },\n                \"Shift-Ctrl-S\": function () {\n                    menu.saveAllFiles();\n                },\n                \"Shift-Alt-F\": function () {\n                    var currentPath = editors.getCurrentPath();\n                    if (!currentPath) {\n                        return false;\n                    }\n                    wide.fmt(currentPath, wide.curEditor);\n                },\n                \"Alt-F7\": \"findUsages\",\n                \"Shift-Alt-Enter\": function () {\n                    if (windows.isMaxEditor) {\n                        windows.restoreEditor();\n                    } else {\n                        windows.maxEditor();\n                    }\n                },\n                \"Shift-Ctrl-Up\": \"copyLinesUp\",\n                \"Shift-Ctrl-Down\": \"copyLinesDown\",\n                \"Shift-Alt-Up\": \"moveLinesUp\",\n                \"Shift-Alt-Down\": \"moveLinesDown\",\n                \"Shift-Alt-J\": \"selectIdentifier\"\n            }\n        });\n\n        if (\"text/html\" === data.mode) {\n            emmetCodeMirror(editor);\n        }\n\n        editor.on('cursorActivity', function (cm) {\n            $(\".edit-exprinfo\").remove();\n            var cursor = cm.getCursor();\n\n            $(\".footer .cursor\").text('|   ' + (cursor.line + 1) + ':' + (cursor.ch + 1) + '   |');\n        });\n\n        editor.on('blur', function (cm) {\n            $(\".edit-exprinfo\").remove();\n        });\n\n        editor.on('changes', function (cm) {\n            if (cm.doc.isClean()) { // no modification\n                $(\".edit-panel .tabs > div\").each(function () {\n                    var $span = $(this).find(\"span:eq(0)\");\n                    if ($span.attr(\"title\") === cm.options.path) {\n                        $span.removeClass(\"changed\");\n                    }\n                });\n\n                return;\n            }\n\n            // changed\n\n            $(\".edit-panel .tabs > div\").each(function () {\n                var $span = $(this).find(\"span:eq(0)\");\n                if ($span.attr(\"title\") === cm.options.path) {\n                    $span.addClass(\"changed\");\n                }\n            });\n        });\n\n        editor.on('keydown', function (cm, evt) {\n            if (evt.altKey || evt.ctrlKey || evt.shiftKey) {\n                return;\n            }\n\n            var k = evt.which;\n\n            if (k < 48) {\n                return;\n            }\n\n            // hit [0-9]\n\n            if (k > 57 && k < 65) {\n                return;\n            }\n\n            // hit [a-z]\n\n            if (k > 90) {\n                return;\n            }\n\n            if (config.autocomplete) {\n                if (0.5 <= Math.random()) {\n                    CodeMirror.commands.autocompleteAfterDot(cm);\n                }\n            }\n        });\n\n        editor.setSize('100%', $(\".edit-panel\").height() - $(\".edit-panel .tabs\").height());\n        editor.setOption(\"mode\", data.mode);\n        editor.setOption(\"gutters\", [\"CodeMirror-lint-markers\", \"CodeMirror-foldgutter\"]);\n\n        if (\"wide\" !== config.keymap) {\n            editor.setOption(\"keyMap\", config.keymap);\n        }\n\n        if (\"text/x-go\" === data.mode || \"application/json\" === data.mode) {\n            editor.setOption(\"lint\", true);\n        }\n\n        if (\"application/xml\" === data.mode || \"text/html\" === data.mode) {\n            editor.setOption(\"autoCloseTags\", true);\n        }\n\n        wide.curEditor = editor;\n        editors.data.push({\n            \"editor\": editor,\n            \"id\": id\n        });\n\n        $(\".footer .cursor\").text('|   ' + (cursor.line + 1) + ':' + (cursor.ch + 1) + '   |');\n\n        var half = Math.floor(wide.curEditor.getScrollInfo().clientHeight / wide.curEditor.defaultTextHeight() / 2);\n        var cursorCoords = wide.curEditor.cursorCoords({line: cursor.line - half, ch: 0}, \"local\");\n        wide.curEditor.scrollTo(0, cursorCoords.top);\n\n        editor.setCursor(cursor);\n        editor.focus();\n    }\n};","/*\n * Copyright (c) 2014-2018, b3log.org & hacpai.com\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * @file notification.js\n *\n * @author <a href=\"http://vanessa.b3log.org\">Liyuan Li</a>\n * @author <a href=\"http://88250.b3log.org\">Liang Ding</a>\n * @version 1.0.0.1, Dec 8, 2015\n */\nvar notification = {\n    init: function () {\n        $(\".notification-count\").click(function () {\n            bottomGroup.tabs.setCurrent(\"notification\");\n            $(\".bottom-window-group .notification\").focus();\n            $(this).hide();\n        });\n\n        this._initWS();\n    },\n    _initWS: function () {\n        var notificationWS = new ReconnectingWebSocket(config.channel + '/notification/ws?sid=' + config.wideSessionId);\n\n        notificationWS.onopen = function () {\n            console.log('[notification onopen] connected');\n        };\n\n        notificationWS.onmessage = function (e) {\n            var data = JSON.parse(e.data),\n                    $notification = $('.bottom-window-group .notification > table'),\n                    notificationHTML = '';\n            \n            if (data.cmd && \"init-notification\" === data.cmd) {\n                console.log('[notification onmessage]' + e.data);\n                \n                return;\n            }\n\n            notificationHTML += '<tr><td class=\"severity\">' + data.severity\n                    + '</td><td class=\"message\">' + data.message\n                    + '</td><td class=\"type\">' + data.type + '</td></tr>';\n            $notification.append(notificationHTML);\n\n            $(\".notification-count\").show();\n        };\n\n        notificationWS.onclose = function (e) {\n            console.log('[notification onclose] disconnected (' + e.code + ')');\n        };\n\n        notificationWS.onerror = function (e) {\n            console.log('[notification onerror]');\n        };\n    }\n};","/*\n * Copyright (c) 2014-2018, b3log.org & hacpai.com\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * @file tree.js\n *\n * @author <a href=\"http://vanessa.b3log.org\">Liyuan Li</a>\n * @author <a href=\"http://88250.b3log.org\">Liang Ding</a>\n * @version 1.0.1.1, Dec 15, 2015\n */\nvar tree = {\n    fileTree: undefined,\n    // \n    getCurrentNodeLastNode: function (node) {\n        var returnNode = node.children[node.children.length - 1];\n        if (returnNode.open) {\n            return tree.getCurrentNodeLastNode(returnNode);\n        } else {\n            return returnNode;\n        }\n    },\n    // \n    getNextShowNode: function (node) {\n        if (node.level !== 0) {\n            if (node.getParentNode().getNextNode()) {\n                return node.getParentNode().getNextNode();\n            } else {\n                return tree.getNextShowNode(node.getParentNode());\n            }\n        } else {\n            return node.getNextNode();\n        }\n    },\n    isBottomNode: function (node) {\n        if (node.open) {\n            return false;\n        }\n\n        if (node.getParentNode()) {\n            if (node.getParentNode().isLastNode) {\n                return tree.isBottomNode(node.getParentNode());\n            } else {\n                return false;\n            }\n        } else {\n            if (node.isLastNode) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n    },\n    getTIdByPath: function (path) {\n        var nodes = tree.fileTree.transformToArray(tree.fileTree.getNodes());\n        for (var i = 0, ii = nodes.length; i < ii; i++) {\n            if (nodes[i].path === path) {\n                return nodes[i].tId;\n            }\n        }\n\n        return undefined;\n    },\n    getOpenPaths: function () {\n        var nodes = tree.fileTree.transformToArray(tree.fileTree.getNodes()),\n                paths = [];\n        for (var i = 0, ii = nodes.length; i < ii; i++) {\n            if (nodes[i].open) {\n                paths.push(nodes[i].path);\n            }\n        }\n\n        return paths;\n    },\n    getAllParents: function (node, parents) {\n        if (!parents) {\n            parents = [];\n        }\n\n        if (!node || !node.parentTId) {\n            return parents;\n        } else {\n            parents.push(node.getParentNode());\n            return tree.getAllParents(node.getParentNode(), parents);\n        }\n    },\n    isParents: function (tId, parentPath) {\n        var node = tree.fileTree.getNodeByTId(tId);\n        if (!node || !node.parentTId) {\n            return false;\n        } else {\n            var parentNode = tree.fileTree.getNodeByTId(node.parentTId);\n            if (node.path === parentPath) {\n                return true;\n            } else {\n                return tree.isParents(parentNode.tId, parentPath);\n            }\n        }\n    },\n    isDir: function () {\n        if (wide.curNode.iconSkin.indexOf(\"ico-ztree-dir\") === 0) {\n            return true;\n        }\n\n        return false;\n    },\n    newFile: function (it) {\n        if ($(it).hasClass(\"disabled\")) {\n            return false;\n        }\n\n        $(\"#dialogNewFilePrompt\").dialog(\"open\");\n    },\n    newDir: function (it) {\n        if ($(it).hasClass(\"disabled\")) {\n            return false;\n        }\n\n        $(\"#dialogNewDirPrompt\").dialog(\"open\");\n    },\n    removeIt: function (it) {\n        if (it) {\n            if ($(it).hasClass(\"disabled\")) {\n                return false;\n            }\n        } else {\n            if (!wide.curNode.removable) {\n                return false;\n            }\n        }\n\n        $(\"#dialogRemoveConfirm\").dialog(\"open\");\n    },\n    rename: function (it) {\n        if (it) {\n            if ($(it).hasClass(\"disabled\")) {\n                return false;\n            }\n        }\n\n        $(\"#dialogRenamePrompt\").dialog(\"open\");\n    },\n    export: function () {\n        var request = newWideRequest(),\n                isSucc = false;\n        request.path = wide.curNode.path;\n\n        $.ajax({\n            async: false,\n            type: 'POST',\n            url: config.context + '/file/zip/new',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            success: function (result) {\n                if (!result.succ) {\n                    $(\"#dialogAlert\").dialog(\"open\", result.msg);\n\n                    return false;\n                }\n\n                isSucc = true;\n            }\n        });\n\n        if (isSucc) {\n            window.open(config.context + '/file/zip?path=' + wide.curNode.path + \".zip\");\n        }\n    },\n    crossCompile: function (platform) {\n        var request = newWideRequest();\n        request.path = wide.curNode.path;\n        request.platform = platform;\n\n        $.ajax({\n            async: false,\n            type: 'POST',\n            url: config.context + '/cross',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            success: function (result) {\n                if (!result.succ) {\n                    $(\"#dialogAlert\").dialog(\"open\", result.msg);\n\n                    return false;\n                }\n            }\n        });\n    },\n    decompress: function () {\n        var request = newWideRequest();\n        request.path = wide.curNode.path;\n\n        $.ajax({\n            async: false,\n            type: 'POST',\n            url: config.context + '/file/decompress',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            success: function (result) {\n                if (!result.succ) {\n                    $(\"#dialogAlert\").dialog(\"open\", result.msg);\n\n                    return false;\n                }\n\n                var dir = wide.curNode.getParentNode();\n                tree.fileTree.reAsyncChildNodes(dir, \"refresh\");\n            }\n        });\n    },\n    refresh: function (it) {\n        if (it) {\n            if ($(it).hasClass(\"disabled\")) {\n                return false;\n            }\n        }\n\n        tree.fileTree.reAsyncChildNodes(wide.curNode, \"refresh\", true);\n    },\n    gitClone: function (it) {\n        if (it) {\n            if ($(it).hasClass(\"disabled\")) {\n                return false;\n            }\n        }\n\n        $(\"#dialogGitClonePrompt\").dialog('open');\n    },\n    import: function () {\n        var request = newWideRequest();\n        request.path = wide.curNode.path;\n\n        $('#importFileupload').fileupload({\n            url: \"/file/upload?path=\" + request.path,\n            dataType: 'json',\n            formData: request,\n            done: function (e, result) {\n                tree.fileTree.reAsyncChildNodes(wide.curNode, \"refresh\");\n            },\n            fail: function () {\n                console.log(arguments);\n            }\n        });\n    },\n    init: function () {\n        $(\"#file\").click(function () {\n            $(this).focus();\n        });\n\n        var request = newWideRequest();\n\n        $.ajax({\n            type: 'POST',\n            url: config.context + '/files',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            success: function (result) {\n                if (result.succ) {\n                    var $dirRMenu = $(\"#dirRMenu\");\n                    var $fileRMenu = $(\"#fileRMenu\");\n                    var setting = {\n                        data: {\n                            key: {\n                                title: \"path\"\n                            }\n                        },\n                        view: {\n                            showTitle: true,\n                            selectedMulti: false\n                        },\n                        async: {\n                            enable: true,\n                            url: config.context + \"/file/refresh\",\n                            autoParam: [\"path\"]\n                        },\n                        callback: {\n                            onDblClick: function (event, treeId, treeNode) {\n                                if (treeNode) {\n                                    tree.openFile(treeNode);\n                                }\n                            },\n                            onRightClick: function (event, treeId, treeNode) {\n                                if (treeNode && !treeNode.isGOAPI) {\n                                    menu.undisabled(['import', 'export', 'git-clone']);\n\n                                    wide.curNode = treeNode;\n                                    tree.fileTree.selectNode(treeNode);\n\n                                    if (!tree.isDir()) { // if right click on a file\n                                        if (wide.curNode.removable) {\n                                            $fileRMenu.find(\".remove\").removeClass(\"disabled\");\n                                        } else {\n                                            $fileRMenu.find(\".remove\").addClass(\"disabled\");\n                                        }\n\n                                        if (-1 === wide.curNode.path.indexOf(\"zip\", wide.curNode.path.length - \"zip\".length)) { // !path.endsWith(\"zip\")\n                                            $fileRMenu.find(\".decompress\").hide();\n                                        } else {\n                                            $fileRMenu.find(\".decompress\").show();\n                                        }\n\n                                        if (-1 === wide.curNode.path.indexOf(\"go\", wide.curNode.path.length - \"go\".length)) { // !path.endsWith(\"go\")\n                                            $fileRMenu.find(\".linux64\").hide();\n                                        } else {\n                                            $fileRMenu.find(\".linux64\").show();\n                                        }\n\n                                        var top = event.clientY - 10;\n                                        if ($fileRMenu.height() + top > $('.content').height()) {\n                                            top = top - $fileRMenu.height() - 25;\n                                        }\n                                        $fileRMenu.css({\n                                            \"top\": top + \"px\",\n                                            \"left\": event.clientX + \"px\",\n                                            \"display\": \"block\"\n                                        }).show();\n\n                                        $dirRMenu.hide();\n\n                                        menu.disabled(['import', 'git-clone']);\n                                    } else { // \n                                        if (wide.curNode.removable) {\n                                            $dirRMenu.find(\".remove\").removeClass(\"disabled\");\n                                        } else {\n                                            $dirRMenu.find(\".remove\").addClass(\"disabled\");\n                                        }\n\n                                        if (wide.curNode.creatable) {\n                                            $dirRMenu.find(\".create\").removeClass(\"disabled\");\n                                        } else {\n                                            $dirRMenu.find(\".create\").addClass(\"disabled\");\n                                        }\n\n                                        var top = event.clientY - 10;\n                                        if ($dirRMenu.height() + top > $('.content').height()) {\n                                            top = top - $dirRMenu.height() - 25;\n                                        }\n\n                                        $dirRMenu.css({\n                                            \"top\": top + \"px\",\n                                            \"left\": event.clientX + \"px\",\n                                            \"display\": \"block\"\n                                        }).show();\n\n                                        $fileRMenu.hide();\n                                    }\n                                    $(\"#files\").focus();\n                                }\n                            },\n                            onClick: function (event, treeId, treeNode, clickFlag) {\n                                if (treeNode) {\n                                    wide.curNode = treeNode;\n                                    tree.fileTree.selectNode(treeNode);\n\n                                    menu.undisabled(['import', 'export', 'git-clone']);\n                                    if (!tree.isDir()) {\n                                        menu.disabled(['import', 'git-clone']);\n                                    }\n\n                                    $(\"#files\").focus();\n                                }\n                            }\n                        }\n                    };\n                    tree.fileTree = $.fn.zTree.init($(\"#files\"), setting, result.data.children);\n\n                    session.restore();\n                }\n            }\n        });\n\n        this._initSearch();\n        this._initRename();\n    },\n    openFile: function (treeNode, cursor) {\n        wide.curNode = treeNode;\n        var tempCursor = cursor;\n\n        for (var i = 0, ii = editors.data.length; i < ii; i++) {\n            // \n            if (editors.data[i].id === treeNode.path) {\n                editors.tabs.setCurrent(treeNode.path);\n                wide.curEditor = editors.data[i].editor;\n\n                if (!tempCursor) {\n                    tempCursor = wide.curEditor.getCursor();\n                }\n                $(\".footer .cursor\").text('|   ' + (tempCursor.line + 1) + ':' + (tempCursor.ch + 1) + '   |');\n\n                wide.curEditor.setCursor(tempCursor);\n                var half = Math.floor(wide.curEditor.getScrollInfo().clientHeight / wide.curEditor.defaultTextHeight() / 2);\n                var cursorCoords = wide.curEditor.cursorCoords({line: tempCursor.line - half, ch: 0}, \"local\");\n                wide.curEditor.scrollTo(0, cursorCoords.top);\n                wide.curEditor.focus();\n\n                wide.refreshOutline();\n                return false;\n            }\n        }\n\n        if (!tree.isDir()) {\n            var request = newWideRequest();\n            request.path = treeNode.path;\n\n            $.ajax({\n                async: false,\n                type: 'POST',\n                url: config.context + '/file',\n                data: JSON.stringify(request),\n                dataType: \"json\",\n                success: function (result) {\n                    if (!result.succ) {\n                        $(\"#dialogAlert\").dialog(\"open\", result.msg);\n\n                        return false;\n                    }\n\n                    var data = result.data;\n\n                    if (!data.mode) {\n                        var mode = CodeMirror.findModeByFileName(treeNode.path);\n                        if (mode) {\n                            data.mode = mode.mime;\n                        } else {\n                            data.mode = 'text/plain';\n                        }\n                    }\n\n                    if (!data.mode) {\n                        console.error(\"Can't find mode by file name [\" + treeNode.path + \"]\");\n                    }\n\n                    if (\"img\" === data.mode) { //  tab \n                        //  tab\n                        var w = window.open(config.context + data.path);\n                        return false;\n                    }\n\n                    if (!tempCursor) {\n                        tempCursor = CodeMirror.Pos(0, 0);\n                    }\n\n                    editors.newEditor(data, tempCursor);\n\n                    wide.refreshOutline();\n                }\n            });\n        }\n    },\n    _initSearch: function () {\n        $(\"#dialogSearchForm > input:eq(0)\").keyup(function (event) {\n            var $okBtn = $(this).closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\");\n            if (event.which === 13 && !$okBtn.prop(\"disabled\")) {\n                $okBtn.click();\n            }\n\n            if ($.trim($(this).val()) === \"\") {\n                $okBtn.prop(\"disabled\", true);\n            } else {\n                $okBtn.prop(\"disabled\", false);\n            }\n        });\n\n        $(\"#dialogSearchForm > input:eq(1)\").keyup(function (event) {\n            var $okBtn = $(this).closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\");\n            if (event.which === 13 && !$okBtn.prop(\"disabled\")) {\n                $okBtn.click();\n            }\n        });\n\n        $(\"#dialogSearchForm\").dialog({\n            \"modal\": true,\n            \"height\": 80,\n            \"width\": 260,\n            \"title\": config.label.search,\n            \"okText\": config.label.search,\n            \"cancelText\": config.label.cancel,\n            \"afterOpen\": function () {\n                $(\"#dialogSearchForm > input:eq(0)\").val('').focus();\n                $(\"#dialogSearchForm > input:eq(1)\").val('');\n                $(\"#dialogSearchForm\").closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\").prop(\"disabled\", true);\n            },\n            \"ok\": function () {\n                var request = newWideRequest();\n\n                if (!wide.curNode) {\n                    request.dir = \"\";\n                } else {\n                    request.dir = wide.curNode.path;\n                }\n\n                request.text = $(\"#dialogSearchForm > input:eq(0)\").val();\n                request.extension = $(\"#dialogSearchForm > input:eq(1)\").val();\n\n                $.ajax({\n                    type: 'POST',\n                    url: config.context + '/file/search/text',\n                    data: JSON.stringify(request),\n                    dataType: \"json\",\n                    success: function (result) {\n                        if (!result.succ) {\n                            return;\n                        }\n\n                        $(\"#dialogSearchForm\").dialog(\"close\");\n                        editors.appendSearch(result.data, 'founds', request.text);\n                    }\n                });\n            }\n        });\n    },\n    _initRename: function () {\n        $(\"#dialogRenamePrompt\").dialog({\n            \"modal\": true,\n            \"height\": 52,\n            \"width\": 260,\n            \"title\": config.label.rename,\n            \"okText\": config.label.rename,\n            \"cancelText\": config.label.cancel,\n            \"afterOpen\": function () {\n                $(\"#dialogRenamePrompt\").closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\").prop(\"disabled\", true);\n                $(\"#dialogRenamePrompt > input\").val(wide.curNode.name).select().focus();\n            },\n            \"ok\": function () {\n                var name = $(\"#dialogRenamePrompt > input\").val(),\n                        request = newWideRequest();\n\n                request.oldPath = wide.curNode.path;\n                request.newPath = wide.curNode.path.substring(0, wide.curNode.path.lastIndexOf(\"/\") + 1) + name;\n\n                $.ajax({\n                    type: 'POST',\n                    url: config.context + '/file/rename',\n                    data: JSON.stringify(request),\n                    dataType: \"json\",\n                    success: function (result) {\n                        if (!result.succ) {\n                            $(\"#dialogRenamePrompt\").dialog(\"close\");\n                            bottomGroup.tabs.setCurrent(\"notification\");\n                            windows.flowBottom();\n                            $(\".bottom-window-group .notification\").focus();\n                            return false;\n                        }\n\n                        $(\"#dialogRenamePrompt\").dialog(\"close\");\n                    }\n                });\n            }\n        });\n    }\n};","/*\n * Copyright (c) 2014-2018, b3log.org & hacpai.com\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * @file wide.js\n *\n * @author <a href=\"http://vanessa.b3log.org\">Liyuan Li</a>\n * @author <a href=\"http://88250.b3log.org\">Liang Ding</a>\n * @version 1.0.0.1, Dec 8, 2015\n */\nvar wide = {\n    curNode: undefined,\n    curEditor: undefined,\n    curProcessId: undefined, // curent running process id (pid)\n    refreshOutline: function () {\n        if (!wide.curEditor ||\n                (wide.curEditor && wide.curEditor.doc.getMode().name !== \"go\")) {\n            $(\"#outline\").html('');\n            return false;\n        }\n\n        var request = newWideRequest();\n        request.code = wide.curEditor.getValue();\n\n        $.ajax({\n            type: 'POST',\n            async: false,\n            url: config.context + '/outline',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            success: function (result) {\n                if (!result.succ) {\n                    return;\n                }\n\n                var data = result.data;\n\n                var outlineHTML = '<ul class=\"list\">',\n                        decls = ['constDecls', 'varDecls', 'funcDecls',\n                            'structDecls', 'interfaceDecls', 'typeDecls'];\n\n                for (var i = 0, max = decls.length; i < max; i++) {\n                    var key = decls[i];\n                    for (var j = 0, maxj = data[key].length; j < maxj; j++) {\n                        var obj = data[key][j];\n                        outlineHTML += '<li data-ch=\"' + obj.Ch + '\" data-line=\"'\n                                + obj.Line + '\"><span class=\"ico ico-'\n                                + key.replace('Decls', '') + '\"></span> ' + obj.Name + '</li>';\n                    }\n                }\n                $(\"#outline\").html(outlineHTML + '</ul>');\n\n                $(\"#outline li\").dblclick(function () {\n                    var $it = $(this),\n                            cursor = CodeMirror.Pos($it.data('line'), $it.data(\"ch\"));\n\n                    var editor = wide.curEditor;\n                    editor.setCursor(cursor);\n\n                    var half = Math.floor(editor.getScrollInfo().clientHeight / editor.defaultTextHeight() / 2);\n                    var cursorCoords = editor.cursorCoords({line: cursor.line - half, ch: 0}, \"local\");\n                    editor.scrollTo(0, cursorCoords.top);\n\n                    editor.focus();\n                });\n            }\n        });\n    },\n    _initDialog: function () {\n        $(\".dialog-prompt > input\").keyup(function (event) {\n            var $okBtn = $(this).closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\");\n            if (event.which === 13 && !$okBtn.prop(\"disabled\")) {\n                $okBtn.click();\n            }\n\n            if ($.trim($(this).val()) === \"\") {\n                $okBtn.prop(\"disabled\", true);\n            } else {\n                $okBtn.prop(\"disabled\", false);\n            }\n        });\n\n        $(\"#dialogAlert\").dialog({\n            \"modal\": true,\n            \"height\": 40,\n            \"width\": 350,\n            \"title\": config.label.tip,\n            \"hiddenOk\": true,\n            \"cancelText\": config.label.confirm,\n            \"afterOpen\": function (msg) {\n                $(\"#dialogAlert\").html(msg);\n            }\n        });\n\n        $(\"#dialogRemoveConfirm\").dialog({\n            \"modal\": true,\n            \"height\": 36,\n            \"width\": 260,\n            \"title\": config.label.delete,\n            \"okText\": config.label.delete,\n            \"cancelText\": config.label.cancel,\n            \"afterOpen\": function () {\n                $(\"#dialogRemoveConfirm > b\").html('\"' + wide.curNode.name + '\"');\n            },\n            \"ok\": function () {\n                var request = newWideRequest();\n                request.path = wide.curNode.path;\n\n                $.ajax({\n                    type: 'POST',\n                    url: config.context + '/file/remove',\n                    data: JSON.stringify(request),\n                    dataType: \"json\",\n                    success: function (result) {\n                        if (!result.succ) {\n                            $(\"#dialogRemoveConfirm\").dialog(\"close\");\n                            bottomGroup.tabs.setCurrent(\"notification\");\n                            windows.flowBottom();\n                            $(\".bottom-window-group .notification\").focus();\n                            return false;\n                        }\n\n                        $(\"#dialogRemoveConfirm\").dialog(\"close\");\n                    }\n                });\n            }\n        });\n\n        $(\"#dialogNewFilePrompt\").dialog({\n            \"modal\": true,\n            \"height\": 52,\n            \"width\": 260,\n            \"title\": config.label.create_file,\n            \"okText\": config.label.create,\n            \"cancelText\": config.label.cancel,\n            \"afterOpen\": function () {\n                $(\"#dialogNewFilePrompt > input\").val('').focus();\n                $(\"#dialogNewFilePrompt\").closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\").prop(\"disabled\", true);\n            },\n            \"ok\": function () {\n                var request = newWideRequest(),\n                        name = $(\"#dialogNewFilePrompt > input\").val();\n\n                request.path = wide.curNode.path + \"/\" + name;\n                request.fileType = \"f\";\n\n                $.ajax({\n                    type: 'POST',\n                    url: config.context + '/file/new',\n                    data: JSON.stringify(request),\n                    dataType: \"json\",\n                    success: function (result) {\n                        if (!result.succ) {\n                            $(\"#dialogNewFilePrompt\").dialog(\"close\");\n                            bottomGroup.tabs.setCurrent(\"notification\");\n                            windows.flowBottom();\n                            $(\".bottom-window-group .notification\").focus();\n                            return false;\n                        }\n\n                        $(\"#dialogNewFilePrompt\").dialog(\"close\");\n\n                        setTimeout(function () { // Delay, waiting the file change notified and then open it\n                            var tId = tree.getTIdByPath(request.path);\n                            tree.openFile(tree.fileTree.getNodeByTId(tId));\n                            tree.fileTree.selectNode(wide.curNode);\n                        }, 100);\n                    }\n                });\n            }\n        });\n\n        $(\"#dialogNewDirPrompt\").dialog({\n            \"modal\": true,\n            \"height\": 52,\n            \"width\": 260,\n            \"title\": config.label.create_dir,\n            \"okText\": config.label.create,\n            \"cancelText\": config.label.cancel,\n            \"afterOpen\": function () {\n                $(\"#dialogNewDirPrompt > input\").val('').focus();\n                $(\"#dialogNewDirPrompt\").closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\").prop(\"disabled\", true);\n            },\n            \"ok\": function () {\n                var name = $(\"#dialogNewDirPrompt > input\").val(),\n                        request = newWideRequest();\n\n                request.path = wide.curNode.path + \"/\" + name;\n                request.fileType = \"d\";\n\n                $.ajax({\n                    type: 'POST',\n                    url: config.context + '/file/new',\n                    data: JSON.stringify(request),\n                    dataType: \"json\",\n                    success: function (result) {\n                        if (!result.succ) {\n                            $(\"#dialogNewDirPrompt\").dialog(\"close\");\n                            bottomGroup.tabs.setCurrent(\"notification\");\n                            windows.flowBottom();\n                            $(\".bottom-window-group .notification\").focus();\n                            return false;\n                        }\n\n                        $(\"#dialogNewDirPrompt\").dialog(\"close\");\n                    }\n                });\n            }\n        });\n\n        $(\"#dialogGoFilePrompt\").dialog({\n            \"modal\": true,\n            \"height\": 320,\n            \"width\": 660,\n            \"title\": config.label.goto_file,\n            \"okText\": config.label.go,\n            \"cancelText\": config.label.cancel,\n            \"afterInit\": function () {\n                $(\"#dialogGoFilePrompt\").on(\"dblclick\", \"li\", function () {\n                    var tId = tree.getTIdByPath($(this).find(\".ft-small\").text());\n                    tree.openFile(tree.fileTree.getNodeByTId(tId));\n                    tree.fileTree.selectNode(wide.curNode);\n                    $(\"#dialogGoFilePrompt\").dialog(\"close\");\n                    wide.curEditor.focus();\n                });\n\n                $(\"#dialogGoFilePrompt\").on(\"click\", \"li\", function () {\n                    var $list = $(\"#dialogGoFilePrompt > .list\");\n                    $list.find(\"li\").removeClass(\"selected\");\n                    $list.data(\"index\", $(this).data(\"index\"));\n                    $(this).addClass(\"selected\");\n                });\n\n                hotkeys.bindList($(\"#dialogGoFilePrompt > input\"), $(\"#dialogGoFilePrompt > .list\"), function ($selected) {\n                    var tId = tree.getTIdByPath($selected.find(\".ft-small\").text());\n                    tree.openFile(tree.fileTree.getNodeByTId(tId));\n                    tree.fileTree.selectNode(wide.curNode);\n                    $(\"#dialogGoFilePrompt\").dialog(\"close\");\n                    wide.curEditor.focus();\n                });\n\n                $(\"#dialogGoFilePrompt > input\").bind(\"input\", function () {\n                    var name = $(\"#dialogGoFilePrompt > input\").val();\n\n                    var request = newWideRequest();\n                    request.path = '';\n                    request.name = '*' + name + '*';\n                    if (wide.curNode) {\n                        request.path = wide.curNode.path;\n                    }\n\n                    $.ajax({\n                        type: 'POST',\n                        url: config.context + '/file/find/name',\n                        data: JSON.stringify(request),\n                        dataType: \"json\",\n                        success: function (result) {\n                            if (!result.succ) {\n                                return;\n                            }\n\n                            var data = result.data;\n\n                            var goFileHTML = '';\n                            for (var i = 0, max = data.length; i < max; i++) {\n                                var path = data[i].path,\n                                        name = path.substr(path.lastIndexOf(\"/\") + 1),\n                                        icoSkin = wide.getClassBySuffix(name.split(\".\")[1]);\n                                if (i === 0) {\n                                    goFileHTML += '<li data-index=\"' + i + '\" class=\"selected\" title=\"'\n                                            + path + '\"><span class=\"'\n                                            + icoSkin + 'ico\"></span>'\n                                            + name + '&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"ft-small\">'\n                                            + path + '</span></li>';\n                                } else {\n                                    goFileHTML += '<li data-index=\"' + i + '\" title=\"'\n                                            + path + '\"><span class=\"' + icoSkin + 'ico\"></span>'\n                                            + name + '&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"ft-small\">'\n                                            + path + '</span></li>';\n                                }\n                            }\n\n                            $(\"#dialogGoFilePrompt > ul\").html(goFileHTML);\n                        }\n                    });\n                });\n            },\n            \"afterOpen\": function () {\n                $(\"#dialogGoFilePrompt > input\").val('').focus();\n                $(\"#dialogGoFilePrompt\").closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\").prop(\"disabled\", true);\n                $(\"#dialogGoFilePrompt .list\").html('').data(\"index\", 0);\n            },\n            \"ok\": function () {\n                var tId = tree.getTIdByPath($(\"#dialogGoFilePrompt .selected .ft-small\").text());\n                tree.openFile(tree.fileTree.getNodeByTId(tId));\n                tree.fileTree.selectNode(wide.curNode);\n                $(\"#dialogGoFilePrompt\").dialog(\"close\");\n                wide.curEditor.focus();\n            }\n        });\n\n        $(\"#dialogGoLinePrompt\").dialog({\n            \"modal\": true,\n            \"height\": 52,\n            \"width\": 260,\n            \"title\": config.label.goto_line,\n            \"okText\": config.label.go,\n            \"cancelText\": config.label.cancel,\n            \"afterOpen\": function () {\n                $(\"#dialogGoLinePrompt > input\").val('').focus();\n                $(\"#dialogGoLinePrompt\").closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\").prop(\"disabled\", true);\n            },\n            \"ok\": function () {\n                var line = parseInt($(\"#dialogGoLinePrompt > input\").val()) - 1;\n                $(\"#dialogGoLinePrompt\").dialog(\"close\");\n\n                var editor = wide.curEditor;\n                var cursor = editor.getCursor();\n\n                editor.setCursor(CodeMirror.Pos(line, cursor.ch));\n\n                var half = Math.floor(editor.getScrollInfo().clientHeight / editor.defaultTextHeight() / 2);\n                var cursorCoords = editor.cursorCoords({line: line - half, ch: cursor.ch}, \"local\");\n                editor.scrollTo(0, cursorCoords.top);\n\n                editor.focus();\n            }\n        });\n\n        $(\"#dialogGitClonePrompt\").dialog({\n            \"modal\": true,\n            \"height\": 52,\n            \"width\": 360,\n            \"title\": config.label.git_clone,\n            \"okText\": config.label.confirm,\n            \"cancelText\": config.label.cancel,\n            \"afterOpen\": function () {\n                $(\"#dialogGitClonePrompt > input\").val('').focus();\n                $(\"#dialogGitClonePrompt\").closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\").prop(\"disabled\", true);\n            },\n            \"ok\": function () {\n                $(\"#dialogGitClonePrompt\").dialog(\"close\");\n\n                var request = newWideRequest();\n                request.path = wide.curNode.path;\n                request.repository = $(\"#dialogGitClonePrompt > input\").val();\n\n                $.ajax({\n                    type: 'POST',\n                    url: config.context + '/git/clone',\n                    data: JSON.stringify(request),\n                    dataType: \"json\",\n                    success: function (result) {\n                    }\n                });\n            }\n        });\n    },\n    _initWS: function () {\n        var outputWS = new ReconnectingWebSocket(config.channel + '/output/ws?sid=' + config.wideSessionId);\n        outputWS.onopen = function () {\n            console.log('[output onopen] connected');\n        };\n\n        outputWS.onmessage = function (e) {\n            console.log('[output onmessage]' + e.data);\n            var data = JSON.parse(e.data);\n\n            if (goLintFound) {\n                goLintFound = [];\n            }\n\n            if ('run' === data.nextCmd) {\n                var request = newWideRequest();\n                request.executable = data.executable;\n\n                $.ajax({\n                    type: 'POST',\n                    url: config.context + '/run',\n                    data: JSON.stringify(request),\n                    dataType: \"json\"\n                });\n            }\n\n            switch (data.cmd) {\n                case 'run':\n                    var content = $('.bottom-window-group .output > div').html();\n                    if (!wide.curProcessId || '' === content) {\n                        bottomGroup.fillOutput(content + '<pre>' + data.output + '</pre>');\n                    } else {\n                        bottomGroup.fillOutput(content.replace(/<\\/pre>$/g, data.output + '</pre>'));\n                    }\n\n                    wide.curProcessId = data.pid;\n\n                    break;\n                case 'run-done':\n                    bottomGroup.fillOutput($('.bottom-window-group .output > div').html().replace(/<\\/pre>$/g, data.output + '</pre>'));\n\n                    wide.curProcessId = undefined;\n                    $(\"#buildRun\").removeClass(\"ico-stop\")\n                            .addClass(\"ico-buildrun\").attr(\"title\", config.label.build_n_run);\n\n                    break;\n                case 'start-build':\n                case 'start-test':\n                case 'start-vet':\n                case 'start-install':\n                case 'start-get':\n                case 'start-git_clone':\n                    bottomGroup.fillOutput(data.output);\n\n                    break;\n                case 'go test':\n                case 'go vet':\n                case 'go install':\n                case 'go get':\n                    bottomGroup.fillOutput($('.bottom-window-group .output > div').html() + data.output);\n\n                    break;\n                case 'git clone':\n                    bottomGroup.fillOutput($('.bottom-window-group .output > div').html() + data.output);\n                    tree.fileTree.reAsyncChildNodes(wide.curNode, \"refresh\", false);\n\n                    break;\n                case 'build':\n                case 'cross-build':\n                    bottomGroup.fillOutput($('.bottom-window-group .output > div').html() + data.output);\n\n                    if (data.lints) { // has build error\n                        var files = {};\n\n                        for (var i = 0; i < data.lints.length; i++) {\n                            var lint = data.lints[i];\n\n                            goLintFound.push({from: CodeMirror.Pos(lint.lineNo, 0),\n                                to: CodeMirror.Pos(lint.lineNo, 0),\n                                message: lint.msg, severity: lint.severity});\n\n                            files[lint.file] = lint.file;\n                        }\n\n                        $(\"#buildRun\").removeClass(\"ico-stop\")\n                                .addClass(\"ico-buildrun\").attr(\"title\", config.label.build_n_run);\n\n                        // trigger gutter lint\n                        for (var path in files) {\n                            var editor = editors.getEditorByPath(path);\n                            CodeMirror.signal(editor, \"change\", editor);\n                        }\n                    } else {\n                        if ('cross-build' === data.cmd) {\n                            var request = newWideRequest(),\n                                    path = null;\n                            request.path = data.executable;\n                            request.name = data.name;\n\n                            $.ajax({\n                                async: false,\n                                type: 'POST',\n                                url: config.context + '/file/zip/new',\n                                data: JSON.stringify(request),\n                                dataType: \"json\",\n                                success: function (result) {\n                                    if (!result.succ) {\n                                        $(\"#dialogAlert\").dialog(\"open\", result.msg);\n\n                                        return false;\n                                    }\n\n                                    path = result.data;\n                                }\n                            });\n\n                            if (path) {\n                                window.open(config.context + '/file/zip?path=' + path + \".zip\");\n                            }\n                        }\n                    }\n\n                    break;\n            }\n        };\n        outputWS.onclose = function (e) {\n            console.log('[output onclose] disconnected (' + e.code + ')');\n        };\n        outputWS.onerror = function (e) {\n            console.log('[output onerror]');\n        };\n    },\n    _initFooter: function () {\n        $(\".footer .cursor\").dblclick(function () {\n            $(\"#dialogGoLinePrompt\").dialog(\"open\");\n        });\n    },\n    init: function () {\n        this._initFooter();\n\n        this._initWS();\n\n        // \n        $(\"body\").bind(\"mouseup\", function (event) {\n            // MAC \n            if (event.which === 3) {\n                return false;\n            }\n\n            $(\".frame\").hide();\n\n            if (!($(event.target).closest(\".frame\").length === 1 || event.target.className === \"frame\")) {\n                $(\".menu > ul > li\").unbind().removeClass(\"selected\");\n                menu.subMenu();\n            }\n        });\n\n        // \n        window.onbeforeunload = function () {\n            if (editors.data.length > 0) {\n                return config.label.confirm_save;\n            }\n        };\n\n        // \n        document.oncontextmenu = function () {\n            return false;\n        };\n\n        this._initDialog();\n    },\n    _save: function (path, editor) {\n        if (!path) {\n            return false;\n        }\n\n        var request = newWideRequest();\n        request.file = path;\n        request.code = editor.getValue();\n\n        $.ajax({\n            type: 'POST',\n            url: config.context + '/file/save',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            success: function (result) {\n                // reset the save state\n                editor.doc.markClean();\n                $(\".edit-panel .tabs > div\").each(function () {\n                    var $span = $(this).find(\"span:eq(0)\");\n                    if ($span.attr(\"title\") === path) {\n                        $span.removeClass(\"changed\");\n                    }\n                });\n            }\n        });\n    },\n    saveFile: function () {\n        var path = editors.getCurrentPath();\n        if (!path) {\n            return false;\n        }\n\n        var editor = wide.curEditor;\n        if (editor.doc.isClean()) { // no modification\n            return false;\n        }\n\n        if (\"text/x-go\" === editor.getOption(\"mode\")) {\n            wide.gofmt(path, wide.curEditor); // go fmt will save\n\n            // build the file at once\n            var request = newWideRequest();\n            request.file = path;\n            request.code = editor.getValue();\n            request.nextCmd = \"\"; // build only, no following operation\n            $.ajax({\n                type: 'POST',\n                url: config.context + '/build',\n                data: JSON.stringify(request),\n                dataType: \"json\",\n                beforeSend: function () {\n                    bottomGroup.resetOutput();\n                },\n                success: function (result) {\n                }\n            });\n\n            // refresh outline\n            wide.refreshOutline();\n\n            return;\n        }\n\n        wide._save(path, wide.curEditor);\n    },\n    stop: function () {\n        if ($(\"#buildRun\").hasClass(\"ico-buildrun\")) {\n            menu.run();\n            return false;\n        }\n\n        if (!wide.curProcessId) {\n            return false;\n        }\n\n        var request = newWideRequest();\n        request.pid = wide.curProcessId;\n\n        $.ajax({\n            type: 'POST',\n            url: config.context + '/stop',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            success: function (result) {\n                $(\"#buildRun\").removeClass(\"ico-stop\")\n                        .addClass(\"ico-buildrun\").attr(\"title\", config.label.build_n_run);\n            }\n        });\n    },\n    gofmt: function (path, editor) {\n        var cursor = editor.getCursor();\n        var scrollInfo = editor.getScrollInfo();\n\n        var request = newWideRequest();\n        request.file = path;\n        request.code = editor.getValue();\n        request.cursorLine = cursor.line;\n        request.cursorCh = cursor.ch;\n\n        $.ajax({\n            async: false, // sync\n            type: 'POST',\n            url: config.context + '/go/fmt',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            success: function (result) {\n                if (result.succ) {\n                    editor.setValue(result.data.code);\n                    editor.setCursor(cursor);\n                    editor.scrollTo(null, scrollInfo.top);\n\n                    wide._save(path, editor);\n                }\n            }\n        });\n    },\n    fmt: function (path, editor) {\n        var mode = editor.getOption(\"mode\");\n\n        var cursor = editor.getCursor();\n        var scrollInfo = editor.getScrollInfo();\n\n        var request = newWideRequest();\n        request.file = path;\n        request.code = editor.getValue();\n        request.cursorLine = cursor.line;\n        request.cursorCh = cursor.ch;\n\n        var formatted = null;\n\n        switch (mode) {\n            case \"text/x-go\":\n                $.ajax({\n                    async: false, // sync\n                    type: 'POST',\n                    url: config.context + '/go/fmt',\n                    data: JSON.stringify(request),\n                    dataType: \"json\",\n                    success: function (result) {\n                        if (result.succ) {\n                            formatted = result.data.code;\n                        }\n                    }\n                });\n\n                break;\n            case \"text/html\":\n                formatted = html_beautify(editor.getValue());\n                break;\n            case \"text/javascript\":\n            case \"application/json\":\n                formatted = js_beautify(editor.getValue());\n                break;\n            case \"text/css\":\n                formatted = css_beautify(editor.getValue());\n                break;\n            default :\n                break;\n        }\n\n        if (formatted) {\n            editor.setValue(formatted);\n            editor.setCursor(cursor);\n            editor.scrollTo(null, scrollInfo.top);\n\n            wide._save(path, editor);\n        }\n    },\n    getClassBySuffix: function (suffix) {\n        var iconSkin = \"ico-ztree-other \";\n        switch (suffix) {\n            case \"html\":\n            case \"htm\":\n                iconSkin = \"ico-ztree-html \";\n                break;\n            case \"go\":\n                iconSkin = \"ico-ztree-go \";\n                break;\n            case \"css\":\n                iconSkin = \"ico-ztree-css \";\n                break;\n            case \"txt\":\n                iconSkin = \"ico-ztree-text \";\n                break;\n            case \"sql\":\n                iconSkin = \"ico-ztree-sql \";\n                break;\n            case \"properties\":\n                iconSkin = \"ico-ztree-pro \";\n                break;\n            case \"md\":\n                iconSkin = \"ico-ztree-md \";\n                break;\n            case \"js\", \"json\":\n                iconSkin = \"ico-ztree-js \";\n                break;\n            case \"xml\":\n                iconSkin = \"ico-ztree-xml \";\n                break;\n            case \"jpg\":\n            case \"jpeg\":\n            case \"bmp\":\n            case \"gif\":\n            case \"png\":\n            case \"svg\":\n            case \"ico\":\n                iconSkin = \"ico-ztree-img \";\n                break;\n        }\n\n        return iconSkin;\n    }\n};\n\n$(document).ready(function () {\n    wide.init();\n    tree.init();\n    menu.init();\n    hotkeys.init();\n    session.init();\n    notification.init();\n    editors.init();\n    windows.init();\n    bottomGroup.init();\n});\n","/*\n * Copyright (c) 2014-2018, b3log.org & hacpai.com\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * @file session.js\n *\n * @author <a href=\"http://vanessa.b3log.org\">Liyuan Li</a>\n * @version 1.1.0.1, Dec 8, 2015\n */\nvar session = {\n    init: function () {\n        this._initWS();\n\n        var getLayoutState = function (paneState) {\n            var state = 'normal';\n            if (paneState.isClosed) {\n                state = 'min';\n            } else if (paneState.size >= $('body').width()) {\n                state = 'max';\n            }\n\n            return state;\n        };\n\n        // save session content every 30 seconds\n        setInterval(function () {\n            var request = newWideRequest(),\n                    filse = [],\n                    fileTree = [],\n                    currentId = editors.getCurrentId(),\n                    currentFile = currentId ? editors.getCurrentPath() : \"\";\n\n            editors.tabs.obj._$tabs.find(\"div\").each(function () {\n                var $it = $(this);\n                if ($it.find(\"span:eq(0)\").attr(\"title\") !== config.label.start_page) {\n                    filse.push($it.find(\"span:eq(0)\").attr(\"title\"));\n                }\n            });\n\n            fileTree = tree.getOpenPaths();\n\n            request.currentFile = currentFile; // current editor file\n            request.fileTree = fileTree; // file tree expansion state\n            request.files = filse; // editor tabs\n\n\n            request.layout = {\n                \"side\": {\n                    \"size\": windows.outerLayout.west.state.size,\n                    \"state\": getLayoutState(windows.outerLayout.west.state)\n                },\n                \"sideRight\": {\n                    \"size\": windows.innerLayout.east.state.size,\n                    \"state\": getLayoutState(windows.innerLayout.east.state)\n                },\n                \"bottom\": {\n                    \"size\": windows.innerLayout.south.state.size,\n                    \"state\": getLayoutState(windows.innerLayout.south.state)\n                }\n            };\n\n            $.ajax({\n                type: 'POST',\n                url: config.context + '/session/save',\n                data: JSON.stringify(request),\n                dataType: \"json\",\n                success: function (result) {\n                }\n            });\n        }, 30000);\n    },\n    restore: function () {\n        if (!config.latestSessionContent) {\n            return;\n        }\n\n        var fileTree = config.latestSessionContent.fileTree,\n                files = config.latestSessionContent.files,\n                currentFile = config.latestSessionContent.currentFile,\n                id = \"\",\n                nodesToOpen = [];\n\n        var nodes = tree.fileTree.transformToArray(tree.fileTree.getNodes());\n\n        for (var i = 0, ii = nodes.length; i < ii; i++) {\n            // expand tree\n            for (var j = 0, jj = fileTree.length; j < jj; j++) {\n                if (nodes[i].path === fileTree[j]) {\n                    // expand this node only if its parents are open\n                    var parents = tree.getAllParents(tree.fileTree.getNodeByTId(nodes[i].tId)),\n                            isOpen = true;\n                    for (var l = 0, max = parents.length; l < max; l++) {\n                        if (parents[l].open === false) {\n                            isOpen = false;\n                        }\n                    }\n                    if (isOpen) {\n                        tree.fileTree.expandNode(nodes[i], true, false, true);\n                    } else {\n                        // flag it is open\n                        nodes[i].open = true;\n                    }\n                    break;\n                }\n            }\n\n            // open editors\n            for (var k = 0, kk = files.length; k < kk; k++) {\n                if (nodes[i].path === files[k]) {\n                    nodesToOpen.push(nodes[i]);\n                    break;\n                }\n            }\n\n            if (nodes[i].path === currentFile) {\n                id = nodes[i].path;\n\n                // FIXME: \n                tree.fileTree.selectNode(nodes[i]);\n                wide.curNode = nodes[i];\n            }\n        }\n\n        // handle the open sequence of editors\n        for (var m = 0, mm = files.length; m < mm; m++) {\n            for (var n = 0, nn = nodesToOpen.length; n < nn; n++) {\n                if (nodesToOpen[n].path === files[m]) {\n                    tree.openFile(nodesToOpen[n]);\n                    break;\n                }\n            }\n        }\n\n        // set the current editor\n        editors.tabs.setCurrent(id);\n        for (var c = 0, max = editors.data.length; c < max; c++) {\n            if (id === editors.data[c].id) {\n                wide.curEditor = editors.data[c].editor;\n                break;\n            }\n        }        \n    },\n    _initWS: function () {\n        // Used for session retention, server will release all resources of the session if this channel closed\n        var sessionWS = new ReconnectingWebSocket(config.channel + '/session/ws?sid=' + config.wideSessionId);\n\n        sessionWS.onopen = function () {\n            console.log('[session onopen] connected');\n\n            var dateFormat = function (time, fmt) {\n                var date = new Date(time);\n                var dateObj = {\n                    \"M+\": date.getMonth() + 1,\n                    \"d+\": date.getDate(),\n                    \"h+\": date.getHours(),\n                    \"m+\": date.getMinutes(),\n                    \"s+\": date.getSeconds(),\n                    \"q+\": Math.floor((date.getMonth() + 3) / 3),\n                    \"S\": date.getMilliseconds()\n                };\n                if (/(y+)/.test(fmt))\n                    fmt = fmt.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n                for (var k in dateObj)\n                    if (new RegExp(\"(\" + k + \")\").test(fmt)) {\n                        fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1)\n                                ? (dateObj[k]) : ((\"00\" + dateObj[k]).substr((\"\" + dateObj[k]).length)));\n                    }\n                return fmt;\n            };\n\n            var data = {type: \"Network\", severity: \"INFO\",\n                message: \"Connected to server [sid=\" + config.wideSessionId + \"], \" + dateFormat(new Date().getTime(), 'yyyy-MM-dd hh:mm:ss')},\n            $notification = $('.bottom-window-group .notification > table'),\n                    notificationHTML = '';\n\n            notificationHTML += '<tr><td class=\"severity\">' + data.severity\n                    + '</td><td class=\"message\">' + data.message\n                    + '</td><td class=\"type\">' + data.type + '</td></tr>';\n            $notification.append(notificationHTML);\n        };\n\n        sessionWS.onmessage = function (e) {\n            var data = JSON.parse(e.data);\n            switch (data.cmd) {\n                case 'create-file':\n                    var node = tree.fileTree.getNodeByTId(tree.getTIdByPath(data.dir)),\n                            name = data.path.replace(data.dir + '/', ''),\n                            mode = CodeMirror.findModeByFileName(name),\n                            iconSkin = wide.getClassBySuffix(name.split(\".\")[1]);\n\n                    if (data.type && data.type === 'f') {\n                        tree.fileTree.addNodes(node, [{\n                                \"id\": data.path,\n                                \"name\": name,\n                                \"iconSkin\": iconSkin,\n                                \"path\": data.path,\n                                \"mode\": mode,\n                                \"removable\": true,\n                                \"creatable\": true\n                            }]);\n\n                    } else {\n                        tree.fileTree.addNodes(node, [{\n                                \"id\": data.path,\n                                \"name\": name,\n                                \"iconSkin\": \"ico-ztree-dir \",\n                                \"path\": data.path,\n                                \"removable\": true,\n                                \"creatable\": true,\n                                \"isParent\": true\n                            }]);\n                    }\n                    break;\n                case 'remove-file':\n                case 'rename-file':\n                    var node = tree.fileTree.getNodeByTId(tree.getTIdByPath(data.path));\n                    tree.fileTree.removeNode(node);\n\n                    var nodes = tree.fileTree.transformToArray(node);\n                    for (var i = 0, ii = nodes.length; i < ii; i++) {\n                        editors.tabs.del(nodes[i].path);\n                    }\n\n                    break;\n            }\n        };\n        sessionWS.onclose = function (e) {\n            console.log('[session onclose] disconnected (' + e.code + ')');\n\n            var data = {type: \"Network\", severity: \"ERROR\",\n                message: \"Disconnected from server, trying to reconnect it [sid=\" + config.wideSessionId + \"]\"},\n            $notification = $('.bottom-window-group .notification > table'),\n                    notificationHTML = '';\n\n            notificationHTML += '<tr><td class=\"severity\">' + data.severity\n                    + '</td><td class=\"message\">' + data.message\n                    + '</td><td class=\"type\">' + data.type + '</td></tr>';\n            $notification.append(notificationHTML);\n\n            $(\".notification-count\").show();\n        };\n        sessionWS.onerror = function (e) {\n            console.log('[session onerror]');\n        };\n    }\n};","/*\n * Copyright (c) 2014-2018, b3log.org & hacpai.com\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * @file menu.js\n *\n * @author <a href=\"http://vanessa.b3log.org\">Liyuan Li</a>\n * @author <a href=\"http://88250.b3log.org\">Liang Ding</a>\n * @version 1.0.1.3, Oct 5, 2018\n */\nvar menu = {\n    init: function () {\n        this.subMenu();\n        this._initPreference();\n        this._initAbout();\n        this._initShare();\n\n        // \n        $(\".menu .frame li\").click(function () {\n            $(\".menu > ul > li\").unbind().removeClass(\"selected\");\n            menu.subMenu();\n        });\n    },\n    _initShare: function () {\n        $(\".menu .ico-share\").hover(function () {\n            $(\".menu .share-panel\").show();\n        });\n\n        $(\".share-panel .font-ico\").click(function () {\n            var key = $(this).attr('class').split('-')[2];\n            var url = \"https://wide.b3log.org\", pic = 'https://wide.b3log.org/static/images/wide-logo.png';\n            var urls = {};\n            urls.email = \"mailto:?subject=\" + $('title').text()\n                    + \"&body=\" + $('meta[name=description]').attr('content') + ' ' + url;\n\n            var twitterShare = encodeURIComponent($('meta[name=description]').attr('content') + \" \" + url + \" #golang\");\n            urls.twitter = \"https://twitter.com/intent/tweet?status=\" + twitterShare;\n\n            urls.facebook = \"https://www.facebook.com/sharer/sharer.php?u=\" + url;\n            urls.googleplus = \"https://plus.google.com/share?url=\" + url;\n\n            var title = encodeURIComponent($('title').text() + '. \\n' + $('meta[name=description]').attr('content')\n                    + \" #golang#\");\n            urls.weibo = \"http://v.t.sina.com.cn/share/share.php?title=\" + title + \"&url=\" + url + \"&pic=\" + pic;\n            urls.qqz = \"https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=\" + url + \"&sharesource=qzone&title=\" + title+ \"&pics=\" + pic;\n\n            window.open(urls[key], \"_blank\", \"top=100,left=200,width=648,height=618\");\n        });\n    },\n    _initAbout: function () {\n        $(\"#dialogAbout\").load(config.context + '/about', function () {\n            $(\"#dialogAbout\").dialog({\n                \"modal\": true,\n                \"title\": config.label.about,\n                \"hideFooter\": true,\n                \"afterOpen\": function () {\n                    $.ajax({\n                        url: \"https://rhythm.b3log.org/version/wide/latest\",\n                        type: \"GET\",\n                        dataType: \"jsonp\",\n                        jsonp: \"callback\",\n                        success: function (data, textStatus) {\n                            if ($(\"#dialogAbout .version\").text() === data.wideVersion) {\n                                $(\".upgrade\").text(config.label.uptodate);\n                            } else {\n                                $(\".upgrade\").html(config.label.new_version_available + config.label.colon\n                                        + \"<a href='\" + data.wideDownload\n                                        + \"' target='_blank'>\" + data.wideVersion + \"</a>\");\n                            }\n                        }\n                    });\n                }\n            });\n        });\n    },\n    disabled: function (list) {\n        for (var i = 0, max = list.length; i < max; i++) {\n            $(\".menu li.\" + list[i]).addClass(\"disabled\");\n        }\n    },\n    undisabled: function (list) {\n        for (var i = 0, max = list.length; i < max; i++) {\n            $(\".menu li.\" + list[i]).removeClass(\"disabled\");\n        }\n    },\n    // \n    subMenu: function () {\n        $(\".menu > ul > li\").click(function (event) {\n            if ($(event.target).closest(\".frame\").length === 1) {\n                return;\n            }\n            var $it = $(this);\n            $it.find('.frame').show();\n            $(\".menu > ul > li\").removeClass(\"selected\");\n            $(this).addClass(\"selected\");\n\n            $(\".menu > ul > li\").unbind();\n\n            $(\".menu > ul > li\").mouseover(function () {\n                if ($(event.target).closest(\".frame\").length === 1) {\n                    return;\n                }\n                $(\".menu .frame\").hide();\n                $(this).find('.frame').show();\n                $(\".menu > ul > li\").removeClass(\"selected\");\n                $(this).addClass(\"selected\");\n            });\n        });\n    },\n    openPreference: function () {\n        $(\"#dialogPreference\").dialog(\"open\");\n    },\n    saveAllFiles: function () {\n        if ($(\".menu li.save-all\").hasClass(\"disabled\")) {\n            return false;\n        }\n        for (var i = 0, ii = editors.data.length; i < ii; i++) {\n            var path = editors.data[i].id;\n            var editor = editors.data[i].editor;\n\n            if (\"text/x-go\" === editor.getOption(\"mode\")) {\n                wide.fmt(path, editor);\n            } else {\n                wide._save(path, editor);\n            }\n        }\n    },\n    closeAllFiles: function () {\n        if ($(\".menu li.close-all\").hasClass(\"disabled\")) {\n            return false;\n        }\n\n        // \n        var removeData = [];\n        $(\".edit-panel .tabs > div\").each(function (i) {\n            if (i !== 0) {\n                removeData.push($(this).data(\"index\"));\n            }\n        });\n        $(\"#dialogCloseEditor\").data(\"removeData\", removeData);\n        // \n        $(\".edit-panel .tabs .ico-close:eq(0)\").click();\n    },\n    exit: function () {\n        var request = newWideRequest();\n\n        $.ajax({\n            type: 'POST',\n            url: config.context + '/logout',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            success: function (result) {\n                if (result.succ) {\n                    window.location.href = config.context + \"/login\";\n                }\n            }\n        });\n    },\n    openAbout: function () {\n        $(\"#dialogAbout\").dialog(\"open\");\n    },\n    goget: function () {\n        menu.saveAllFiles();\n\n        var currentPath = editors.getCurrentPath();\n        if (!currentPath) {\n            return false;\n        }\n\n        if ($(\".menu li.go-get\").hasClass(\"disabled\")) {\n            return false;\n        }\n\n        var request = newWideRequest();\n        request.file = currentPath;\n\n        $.ajax({\n            type: 'POST',\n            url: config.context + '/go/get',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            beforeSend: function () {\n                bottomGroup.resetOutput();\n            },\n            success: function (result) {\n            }\n        });\n    },\n    goinstall: function () {\n        menu.saveAllFiles();\n\n        var currentPath = editors.getCurrentPath();\n        if (!currentPath) {\n            return false;\n        }\n\n        if ($(\".menu li.go-install\").hasClass(\"disabled\")) {\n            return false;\n        }\n\n        var request = newWideRequest();\n        request.file = currentPath;\n\n        $.ajax({\n            type: 'POST',\n            url: config.context + '/go/install',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            beforeSend: function () {\n                bottomGroup.resetOutput();\n            },\n            success: function (result) {\n            }\n        });\n    },\n    // go test.\n    test: function () {\n        menu.saveAllFiles();\n\n        var currentPath = editors.getCurrentPath();\n        if (!currentPath) {\n            return false;\n        }\n\n        if ($(\".menu li.go-test\").hasClass(\"disabled\")) {\n            return false;\n        }\n\n        var request = newWideRequest();\n        request.file = currentPath;\n\n        $.ajax({\n            type: 'POST',\n            url: config.context + '/go/test',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            beforeSend: function () {\n                bottomGroup.resetOutput();\n            },\n            success: function (result) {\n            }\n        });\n    },\n    // go vet.\n    govet: function () {\n        menu.saveAllFiles();\n\n        var currentPath = editors.getCurrentPath();\n        if (!currentPath) {\n            return false;\n        }\n\n        if ($(\".menu li.go-vet\").hasClass(\"disabled\")) {\n            return false;\n        }\n\n        var request = newWideRequest();\n        request.file = currentPath;\n\n        $.ajax({\n            type: 'POST',\n            url: config.context + '/go/vet',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            beforeSend: function () {\n                bottomGroup.resetOutput();\n            },\n            success: function (result) {\n            }\n        });\n    },\n    // Build & Run.\n    run: function () {\n        menu.saveAllFiles();\n\n        if ($(\"#buildRun\").hasClass(\"ico-stop\")) {\n            wide.stop();\n            return false;\n        }\n\n        var currentPath = editors.getCurrentPath();\n        if (!currentPath) {\n            return false;\n        }\n\n        if ($(\".menu li.run\").hasClass(\"disabled\")) {\n            return false;\n        }\n\n        var request = newWideRequest();\n        request.file = currentPath;\n        request.code = wide.curEditor.getValue();\n        request.nextCmd = \"run\";\n\n        $.ajax({\n            type: 'POST',\n            url: config.context + '/build',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            beforeSend: function () {\n                bottomGroup.resetOutput();\n\n                $(\"#buildRun\").addClass(\"ico-stop\")\n                        .removeClass(\"ico-buildrun\").attr(\"title\", config.label.stop);\n            },\n            success: function (result) {\n            }\n        });\n    },\n    // Build.\n    build: function () {\n        menu.saveAllFiles();\n\n        var currentPath = editors.getCurrentPath();\n        if (!currentPath) {\n            return false;\n        }\n\n        if ($(\".menu li.build\").hasClass(\"disabled\")) {\n            return false;\n        }\n\n        var request = newWideRequest();\n        request.file = currentPath;\n        request.code = wide.curEditor.getValue();\n        request.nextCmd = \"\"; // build only, no following operation\n\n        $.ajax({\n            type: 'POST',\n            url: config.context + '/build',\n            data: JSON.stringify(request),\n            dataType: \"json\",\n            beforeSend: function () {\n                bottomGroup.resetOutput();\n            },\n            success: function (result) {\n            }\n        });\n    },\n    _initPreference: function () {\n        $(\"#dialogPreference\").load(config.context + '/preference', function () {\n            $(\"#dialogPreference input\").keyup(function () {\n                var isChange = false,\n                        emptys = [],\n                        emptysTip = '';\n                $(\"#dialogPreference input\").each(function () {\n                    var $it = $(this);\n                    // data-value  value  String\n                    if ($it.val() != $it.data(\"value\")) {\n                        isChange = true;\n                    }\n\n                    if ($.trim($it.val()) === '') {\n                        emptys.push($it);\n                    }\n                });\n\n                var $okBtn = $(\"#dialogPreference\").closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\");\n                if (isChange) {\n                    $okBtn.prop(\"disabled\", false);\n                } else {\n                    $okBtn.prop(\"disabled\", true);\n                }\n\n                if (emptys.length === 0) {\n                    $(\"#dialogPreference\").find(\".tip\").html(\"\");\n                    $okBtn.prop(\"disabled\", false);\n                } else {\n                    for (var i = 0, max = emptys.length; i < max; i++) {\n                        var tabIndex = emptys[i].closest('div').data(\"index\"),\n                                text = $.trim(emptys[i].parent().text());\n                        emptysTip += '[' + $('#dialogPreference .tabs > div[data-index=\"' + tabIndex + '\"]').text()\n                                + '] -> [' + text.substr(0, text.length - 1)\n                                + ']: ' + config.label.no_empty + \"<br/>\";\n                    }\n                    $(\"#dialogPreference\").find(\".tip\").html(emptysTip);\n                    $okBtn.prop(\"disabled\", true);\n                }\n            });\n\n            $(\"#dialogPreference select\").on(\"change\", function () {\n                var isChange = false;\n                $(\"#dialogPreference select\").each(function () {\n                    if ($(this).val() !== $(this).data(\"value\")) {\n                        isChange = true;\n                    }\n                });\n\n                var $okBtn = $(\"#dialogPreference\").closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\");\n                if (isChange) {\n                    $okBtn.prop(\"disabled\", false);\n                } else {\n                    $okBtn.prop(\"disabled\", true);\n                }\n            });\n\n            $(\"#dialogPreference\").dialog({\n                \"modal\": true,\n                \"height\": 280,\n                \"width\": 800,\n                \"title\": config.label.preference,\n                \"okText\": config.label.apply,\n                \"cancelText\": config.label.cancel,\n                \"afterOpen\": function () {\n                    var $okBtn = $(\"#dialogPreference\").closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\");\n                    $okBtn.prop(\"disabled\", true);\n                },\n                \"ok\": function () {\n                    var request = newWideRequest(),\n                            $dialogPreference = $(\"#dialogPreference\"),\n                            $fontFamily = $dialogPreference.find(\"input[name=fontFamily]\"),\n                            $fontSize = $dialogPreference.find(\"input[name=fontSize]\"),\n                            $goFmt = $dialogPreference.find(\"select[name=goFmt]\"),\n                            $GoBuildArgsForLinux = $dialogPreference.find(\"input[name=GoBuildArgsForLinux]\"),\n                            $GoBuildArgsForWindows = $dialogPreference.find(\"input[name=GoBuildArgsForWindows]\"),\n                            $GoBuildArgsForDarwin = $dialogPreference.find(\"input[name=GoBuildArgsForDarwin]\"),\n                            $workspace = $dialogPreference.find(\"input[name=workspace]\"),\n                            $password = $dialogPreference.find(\"input[name=password]\"),\n                            $email = $dialogPreference.find(\"input[name=email]\"),\n                            $locale = $dialogPreference.find(\"select[name=locale]\"),\n                            $theme = $dialogPreference.find(\"select[name=theme]\"),\n                            $editorFontFamily = $dialogPreference.find(\"input[name=editorFontFamily]\"),\n                            $editorFontSize = $dialogPreference.find(\"input[name=editorFontSize]\"),\n                            $editorLineHeight = $dialogPreference.find(\"input[name=editorLineHeight]\"),\n                            $editorTheme = $dialogPreference.find(\"select[name=editorTheme]\"),\n                            $editorTabSize = $dialogPreference.find(\"input[name=editorTabSize]\"),\n                            $keymap = $dialogPreference.find(\"select[name=keymap]\");\n\n                    $.extend(request, {\n                        \"fontFamily\": $fontFamily.val(),\n                        \"fontSize\": $fontSize.val(),\n                        \"goFmt\": $goFmt.val(),\n                        \"GoBuildArgsForLinux\": $GoBuildArgsForLinux.val(),\n                        \"GoBuildArgsForWindows\": $GoBuildArgsForWindows.val(),\n                        \"GoBuildArgsForDarwin\": $GoBuildArgsForDarwin.val(),\n                        \"workspace\": $workspace.val(),\n                        \"password\": $password.val(),\n                        \"email\": $email.val(),\n                        \"locale\": $locale.val(),\n                        \"theme\": $theme.val(),\n                        \"editorFontFamily\": $editorFontFamily.val(),\n                        \"editorFontSize\": $editorFontSize.val(),\n                        \"editorLineHeight\": $editorLineHeight.val(),\n                        \"editorTheme\": $editorTheme.val(),\n                        \"editorTabSize\": $editorTabSize.val(),\n                        \"keymap\": $keymap.val()\n                    });\n\n                    if (config.keymap !== $keymap.val()) {\n                        window.location.reload();\n                    }\n\n                    $.ajax({\n                        type: 'POST',\n                        url: config.context + '/preference',\n                        data: JSON.stringify(request),\n                        success: function (result, textStatus, jqXHR) {\n                            if (!result.succ) {\n                                return false;\n                            }\n\n                            $fontFamily.data(\"value\", $fontFamily.val());\n                            $fontSize.data(\"value\", $fontSize.val());\n                            $goFmt.data(\"value\", $goFmt.val());\n                            $GoBuildArgsForLinux.data(\"value\", $GoBuildArgsForLinux.val());\n                            $GoBuildArgsForWindows.data(\"value\", $GoBuildArgsForWindows.val());\n                            $GoBuildArgsForDarwin.data(\"value\", $GoBuildArgsForDarwin.val());\n                            $workspace.data(\"value\", $workspace.val());\n                            $password.data(\"value\", $password.val());\n                            $email.data(\"value\", $email.val());\n                            $locale.data(\"value\", $locale.val());\n                            $theme.data(\"value\", $theme.val());\n                            $editorFontFamily.data(\"value\", $editorFontFamily.val());\n                            $editorFontSize.data(\"value\", $editorFontSize.val());\n                            $editorLineHeight.data(\"value\", $editorLineHeight.val());\n                            $editorTheme.data(\"value\", $editorTheme.val());\n                            $editorTabSize.data(\"value\", $editorTabSize.val());\n                            $keymap.data(\"value\", $keymap.val());\n\n                            // update the config\n                            config.keymap = $keymap.val();\n\n                            var $okBtn = $(\"#dialogPreference\").closest(\".dialog-main\").find(\".dialog-footer > button:eq(0)\");\n                            $okBtn.prop(\"disabled\", true);\n\n                            $(\"#themesLink\").attr(\"href\", config.staticServer + '/static/css/themes/' + $theme.val() + '.css');\n\n                            config.editorTheme = $editorTheme.val();\n                            for (var i = 0, ii = editors.data.length; i < ii; i++) {\n                                editors.data[i].editor.setOption(\"theme\", $editorTheme.val());\n                            }\n                        }\n                    });\n                }\n            });\n\n            new Tabs({\n                id: \".preference\"\n            });\n        });\n    }\n};\n","/*\n * Copyright (c) 2014-2018, b3log.org & hacpai.com\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * @file windows.js\n *\n * @author <a href=\"http://vanessa.b3log.org\">Liyuan Li</a>\n * @author <a href=\"http://88250.b3log.org\">Liang Ding</a>\n * @version 1.1.2.2, Feb 16, 2016\n */\nvar windows = {\n    isMaxEditor: false,\n    outerLayout: {},\n    innerLayout: {},\n    init: function () {\n        if (!config.latestSessionContent) {\n            config.latestSessionContent = {\n                \"fileTree\": [],\n                \"files\": [],\n                \"currentFile\": \"\",\n            };\n        }\n        \n        if (!config.latestSessionContent.layout) {\n            config.latestSessionContent.layout = {\n                \"side\": {\n                    \"size\": 200,\n                    \"state\": 'normal'\n                },\n                \"sideRight\": {\n                    \"size\": 200,\n                    \"state\": 'normal'\n                },\n                \"bottom\": {\n                    \"size\": 100,\n                    \"state\": 'normal'\n                }\n            };\n        }\n\n        var layout = config.latestSessionContent.layout;\n\n        this.outerLayout = $('body').layout({\n            north__paneSelector: \".menu\",\n            center__paneSelector: \".content\",\n            south__paneSelector: \".footer\",\n            north__size: 22,\n            south__size: 19,\n            spacing_open: 2,\n            north__spacing_open: 0,\n            south__spacing_open: 0,\n            defaults: {\n                fxSpeed_open: 300,\n                fxSpeed_close: 100,\n                fxSettings_close: {\n                    easing: \"easeOutQuint\"\n                },\n                fxSettings_open: {\n                    easing: \"easeInQuint\"\n                }\n            },\n            west: {\n                size: layout.side.size,\n                paneSelector: \".side\",\n                togglerLength_open: 0,\n                togglerLength_closed: 15,\n                togglerAlign_closed: \"top\",\n                slideTrigger_open: \"mouseover\",\n                spacing_closed: 15,\n                minSize: 100,\n                togglerClass: \"ico-restore\",\n                togglerTip_open: config.label.min,\n                togglerTip_closed: config.label.restore_side,\n                resizerTip: config.label.resize,\n                initClosed: (layout.side.state === 'min')\n            }\n        });\n\n        this.innerLayout = $('div.content').layout({\n            spacing_open: 2,\n            defaults: {\n                fxSpeed_open: 300,\n                fxSpeed_close: 100,\n                fxSettings_close: {\n                    easing: \"easeOutQuint\"\n                },\n                fxSettings_open: {\n                    easing: \"easeInQuint\"\n                }\n            },\n            center: {\n                paneSelector: \".edit-panel\"\n            },\n            east: {\n                size: layout.sideRight.size,\n                paneSelector: \".side-right\",\n                togglerLength_open: 0,\n                togglerLength_closed: 15,\n                togglerAlign_closed: \"top\",\n                slideTrigger_open: \"mouseover\",\n                spacing_closed: 15,\n                minSize: 100,\n                togglerClass: \"ico-restore\",\n                togglerTip_open: config.label.min,\n                togglerTip_closed: config.label.restore_outline,\n                resizerTip: config.label.resize,\n                initClosed: (layout.sideRight.state === 'min')\n            },\n            south: {\n                size: layout.bottom.size,\n                paneSelector: \".bottom-window-group\",\n                togglerLength_open: 0,\n                togglerLength_closed: 15,\n                togglerAlign_closed: \"top\",\n                slideTrigger_open: \"mouseover\",\n                spacing_closed: 16,\n                minSize: 100,\n                togglerClass: \"ico-restore\",\n                togglerTip_open: config.label.min,\n                togglerTip_closed: config.label.restore_bottom,\n                resizerTip: config.label.resize,\n                initClosed: (layout.bottom.state === 'min'),\n                ondrag_end: function (type, pane) {\n                    windows.refreshEditor(pane, 'drag');\n                },\n                onresize_end: function (type, pane) {\n                    windows.refreshEditor(pane, 'resize');\n                },\n                onclose_end: function (type, pane) {\n                    windows.refreshEditor(pane, 'close');\n                },\n                onopen_end: function (type, pane) {\n                    windows.refreshEditor(pane, 'open');\n                },\n                onshow_end: function (type, pane) {\n                    windows.refreshEditor(pane, 'show');\n                }\n            }\n        });\n\n        this.outerLayout.addCloseBtn(\".side .ico-min\", \"west\");\n        this.innerLayout.addCloseBtn(\".side-right .ico-min\", \"east\");\n        this.innerLayout.addCloseBtn(\".bottom-window-group .ico-min\", \"south\");\n\n        if (layout.side.state === 'max') {\n            windows.maxSide();\n        }\n        if (layout.sideRight.state === 'max') {\n            windows.maxSideRight();\n        }\n        if (layout.bottom.state === 'max') {\n            windows.maxBottom();\n        }\n\n        $(\".toolbars .ico-max\").click(function () {\n            windows.toggleEditor();\n        });\n\n        $(\".edit-panel .tabs\").on(\"dblclick\", function () {\n            windows.toggleEditor();\n        });\n\n        $(\".bottom-window-group .tabs\").dblclick(function () {\n            var $it = $(\".bottom-window-group\");\n            if ($it.hasClass(\"bottom-window-group-max\")) {\n                windows.restoreBottom();\n            } else {\n                windows.maxBottom($it);\n            }\n        });\n\n        $(\".side .tabs\").dblclick(function () {\n            var $it = $(\".side\");\n            if ($it.hasClass(\"side-max\")) {\n                windows.restoreSide();\n            } else {\n                windows.restoreSide($it);\n            }\n        });\n\n        $(\".side-right .tabs\").dblclick(function () {\n            var $it = $(\".side-right\");\n            if ($it.hasClass(\"side-right-max\")) {\n                windows.restoreSideRight();\n            } else {\n                windows.maxSideRight($it);\n            }\n        });\n\n        $('.bottom-window-group .search').height($('.bottom-window-group .tabs-panel').height());\n        $(window).resize(function () {\n            windows.refreshEditor($('.bottom-window-group'));\n        });\n\n    },\n    maxEditor: function () {\n        var $it = $(\".toolbars .font-ico\");\n        windows.outerLayout.close('west');\n        windows.innerLayout.close('south');\n        windows.innerLayout.close('east');\n        $it.removeClass('ico-max').addClass('ico-restore').attr('title', config.label.min);\n        windows.isMaxEditor = true;\n    },\n    maxBottom: function ($it) {\n        $it.data('height', $it.height()).addClass(\"bottom-window-group-max\").find('.ico-min').hide();\n        windows.outerLayout.hide('west');\n        windows.innerLayout.hide('east');\n        windows.innerLayout.sizePane('south', $('.content').height());\n    },\n    maxSide: function ($it) {\n        $it.data('width', $it.width()).addClass(\"side-max\").find('.ico-min').hide();\n        $('.content').hide();\n        windows.outerLayout.sizePane('west', $('body').width());\n    },\n    maxSideRight: function ($it) {\n        $it.addClass(\"side-right-max\").data('width', $it.width()).find('.ico-min').hide();\n        windows.outerLayout.hide('west');\n        windows.innerLayout.hide('south');\n        windows.innerLayout.sizePane('east', $('body').width());\n    },\n    toggleEditor: function () {\n        var $it = $(\".toolbars .font-ico\");\n        if ($it.hasClass('ico-restore')) {\n            windows.restoreEditor();\n        } else {\n            windows.maxEditor();\n        }\n    },\n    restoreBottom: function () {\n        var $it = $(\".bottom-window-group\");\n        $it.removeClass(\"bottom-window-group-max\").find('.ico-min').show();\n        windows.outerLayout.show('west');\n        windows.innerLayout.show('east');\n        windows.innerLayout.sizePane('south', $it.data('height'));\n    },\n    restoreSide: function () {\n        var $it = $(\".side\");\n        $it.removeClass(\"side-max\").find('.ico-min').show();\n        $('.content').show();\n        windows.outerLayout.sizePane('west', $it.data('width'));\n    },\n    restoreSideRight: function () {\n        var $it = $(\".side-right\");\n        $it.removeClass(\"side-right-max\").find('.ico-min').show();\n        windows.outerLayout.show('west');\n        windows.innerLayout.show('south');\n        windows.innerLayout.sizePane('east', $it.data('width'));\n    },\n    restoreEditor: function () {\n        windows.outerLayout.open('west');\n        windows.innerLayout.open('south');\n        windows.innerLayout.open('east');\n        windows.isMaxEditor = false;\n        $(\".toolbars .font-ico\").addClass('ico-max').removeClass('ico-restore').attr('title', config.label.max_editor);\n    },\n    refreshEditor: function (pane, type) {\n        var editorDatas = editors.data,\n                height = $('.content').height() - pane.height() - 24;\n        switch (type) {\n            case 'close':\n                height = $('.content').height() - 40;\n                break;\n            default:\n                break;\n        }\n        for (var i = 0, ii = editorDatas.length; i < ii; i++) {\n            editorDatas[i].editor.setSize(\"100%\", height);\n        }\n\n        $('.bottom-window-group .search').height($('.bottom-window-group .tabs-panel').height());\n    },\n    flowBottom: function () {\n        if (windows.innerLayout.south.state.isClosed) {\n            windows.innerLayout.slideOpen('south');\n        }\n    }\n};","/*\n * Copyright (c) 2014-2018, b3log.org & hacpai.com\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * @file hotkeys.js\n *\n * @author <a href=\"http://vanessa.b3log.org\">Liyuan Li</a>\n * @author <a href=\"http://88250.b3log.org\">Liang Ding</a>\n * @version 1.0.0.2, Dec 15, 2015\n */\nvar hotkeys = {\n    defaultKeyMap: {\n        // Ctrl-0\n        goEditor: {\n            ctrlKey: true,\n            altKey: false,\n            shiftKey: false,\n            which: 48,\n            fun: function () {\n                if (wide.curEditor) {\n                    wide.curEditor.focus();\n                }\n            }\n        },\n        // Ctrl-1\n        goFileTree: {\n            ctrlKey: true,\n            altKey: false,\n            shiftKey: false,\n            which: 49,\n            fun: function () {\n                //  tabindex  -1  focus\n                if (windows.outerLayout.west.state.isClosed) {\n                    windows.outerLayout.slideOpen('west');\n                }\n                $(\"#files\").focus();\n            }\n        },\n        // Ctrl-2\n        goOutline: {\n            ctrlKey: true,\n            altKey: false,\n            shiftKey: false,\n            which: 50,\n            fun: function () {\n                if (windows.innerLayout.east.state.isClosed) {\n                    windows.innerLayout.slideOpen('east');\n                }\n\n                $(\"#outline\").focus();\n            }\n        },\n        // Ctrl-4\n        goOutput: {\n            ctrlKey: true,\n            altKey: false,\n            shiftKey: false,\n            which: 52,\n            fun: function () {\n                bottomGroup.tabs.setCurrent(\"output\");\n                windows.flowBottom();\n                $(\".bottom-window-group .output\").focus();\n            }\n        },\n        // Ctrl-5\n        goSearch: {\n            ctrlKey: true,\n            altKey: false,\n            shiftKey: false,\n            which: 53,\n            fun: function () {\n                bottomGroup.tabs.setCurrent(\"search\");\n                windows.flowBottom();\n                $(\".bottom-window-group .search\").focus();\n            }\n        },\n        // Ctrl-6\n        goNotification: {\n            ctrlKey: true,\n            altKey: false,\n            shiftKey: false,\n            which: 54,\n            fun: function () {\n                bottomGroup.tabs.setCurrent(\"notification\");\n                windows.flowBottom();\n                $(\".bottom-window-group .notification\").focus();\n            }\n        },\n        // Alt-C\n        clearWindow: {\n            ctrlKey: false,\n            altKey: true,\n            shiftKey: false,\n            which: 67\n        },\n        // Ctrl-D    \n        changeEditor: {\n            ctrlKey: true,\n            altKey: false,\n            shiftKey: false,\n            which: 68\n        },\n        // Ctrl-F search  \n        search: {\n            ctrlKey: true,\n            altKey: false,\n            shiftKey: false,\n            which: 70\n        },\n        // Ctrl-Q close current editor   \n        closeCurEditor: {\n            ctrlKey: true,\n            altKey: false,\n            shiftKey: false,\n            which: 81\n        },\n        // Ctrl-R\n        rename: {\n            ctrlKey: true,\n            altKey: false,\n            shiftKey: false,\n            which: 82\n        },\n        // Shift-Alt-O \n        goFile: {\n            ctrlKey: false,\n            altKey: true,\n            shiftKey: true,\n            which: 79\n        },\n        // F5 Build\n        build: {\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            which: 116\n        },\n        // F6 Build & Run\n        buildRun: {\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            which: 117\n        }\n    },\n    bindList: function ($source, $list, enterFun) {\n        $list.data(\"index\", 0);\n        $source.keydown(function (event) {\n            var index = $list.data(\"index\"),\n                    count = $list.find(\"li\").length;\n\n            if (count === 0) {\n                return true;\n            }\n\n            if (event.which === 38) {   // up\n                index--;\n                if (index < 0) {\n                    index = count - 1;\n                }\n            }\n\n            if (event.which === 40) {   // down\n                index++;\n                if (index > count - 1) {\n                    index = 0;\n                }\n            }\n\n            var $selected = $list.find(\"li:eq(\" + index + \")\");\n\n            if (event.which === 13) {   // enter\n                enterFun($selected);\n            }\n\n            $list.find(\"li\").removeClass(\"selected\");\n            $list.data(\"index\", index);\n            $selected.addClass(\"selected\");\n\n            if (index === 0) {\n                $list.scrollTop(0);\n            } else {\n                if ($selected[0].offsetTop + $list.scrollTop() > $list.height()) {\n                    if (event.which === 40) {\n                        $list.scrollTop($list.scrollTop() + $selected.height());\n                    } else {\n                        $list.scrollTop($selected[0].offsetTop);\n                    }\n                } else {\n                    $list.scrollTop(0);\n                }\n            }\n\n            // \n            if (event.which === 38 || event.which === 40 || event.which === 13) {\n                return false;\n            }\n        });\n    },\n    _bindOutput: function () {\n        $(\".bottom-window-group .output\").keydown(function (event) {\n            var hotKeys = hotkeys.defaultKeyMap;\n            if (event.altKey === hotKeys.clearWindow.altKey\n                    && event.which === hotKeys.clearWindow.which) {  // Alt-C clear output\n                bottomGroup.clear('output');\n\n                event.preventDefault();\n\n                return;\n            }\n        });\n    },\n    _bindFileTree: function () {\n        $(\"#files\").keydown(function (event) {\n            event.preventDefault();\n\n            var hotKeys = hotkeys.defaultKeyMap;\n            if (event.ctrlKey === hotKeys.search.ctrlKey\n                    && event.which === hotKeys.search.which) {  // Ctrl-F \n                $(\"#dialogSearchForm\").dialog(\"open\");\n                return;\n            }\n\n            if (event.ctrlKey === hotKeys.rename.ctrlKey\n                    && event.which === hotKeys.rename.which) {  // Ctrl-R \n                if (wide.curNode.removable) {\n                    $(\"#dialogRenamePrompt\").dialog(\"open\");\n                }\n                return;\n            }\n\n            switch (event.which) {\n                case 46: // delete\n                    tree.removeIt();\n                    break;\n                case 13: // enter\n                    if (!wide.curNode) {\n                        return false;\n                    }\n\n                    if (tree.isDir()) {\n                        if (wide.curNode.open) {\n                            return false;\n                        }\n\n                        tree.fileTree.expandNode(wide.curNode, true, false, true);\n                        $(\"#files\").focus();\n\n                        break;\n                    }\n\n                    tree.openFile(wide.curNode);\n\n                    break;\n                case 38: // up\n                    var node = {};\n\n                    if (!wide.curNode) { // select the first one if no node been selected\n                        node = tree.fileTree.getNodeByTId(\"files_1\");\n                    } else {\n                        if (wide.curNode && wide.curNode.isFirstNode && wide.curNode.level === 0) {\n                            return false;\n                        }\n\n                        node = wide.curNode.getPreNode();\n                        if (wide.curNode.isFirstNode && wide.curNode.getParentNode()) {\n                            node = wide.curNode.getParentNode();\n                        }\n\n                        var preNode = wide.curNode.getPreNode();\n                        if (preNode && tree.isDir() && preNode.open) {\n                            node = tree.getCurrentNodeLastNode(preNode);\n                        }\n                    }\n\n                    wide.curNode = node;\n                    tree.fileTree.selectNode(node);\n                    $(\"#files\").focus();\n                    break;\n                case 40: // down\n                    var node = {};\n\n                    if (!wide.curNode) { // select the first one if no node been selected                        \n                        node = tree.fileTree.getNodeByTId(\"files_1\");\n                    } else {\n                        if (wide.curNode && tree.isBottomNode(wide.curNode)) {\n                            return false;\n                        }\n\n                        node = wide.curNode.getNextNode();\n                        if (tree.isDir() && wide.curNode.open) {\n                            node = wide.curNode.children[0];\n                        }\n\n                        var nextShowNode = tree.getNextShowNode(wide.curNode);\n                        if (wide.curNode.isLastNode && wide.curNode.level !== 0 && !wide.curNode.open && nextShowNode) {\n                            node = nextShowNode;\n                        }\n                    }\n\n                    if (node) {\n                        wide.curNode = node;\n                        tree.fileTree.selectNode(node);\n                    }\n\n                    $(\"#files\").focus();\n                    break;\n                case 37: // left\n                    if (!wide.curNode) {\n                        wide.curNode = tree.fileTree.getNodeByTId(\"files_1\");\n                        tree.fileTree.selectNode(wide.curNode);\n                        $(\"#files\").focus();\n                        return false;\n                    }\n\n                    if (!tree.isDir() || !wide.curNode.open) {\n                        return false;\n                    }\n\n                    tree.fileTree.expandNode(wide.curNode, false, false, true);\n                    $(\"#files\").focus();\n                    break;\n                case 39: // right\n                    if (!wide.curNode) {\n                        wide.curNode = tree.fileTree.getNodeByTId(\"files_1\");\n                        tree.fileTree.selectNode(wide.curNode);\n                        $(\"#files\").focus();\n                        return false;\n                    }\n\n                    if (!tree.isDir() || wide.curNode.open) {\n                        return false;\n                    }\n\n                    tree.fileTree.expandNode(wide.curNode, true, false, true);\n                    $(\"#files\").focus();\n\n                    break;\n                case 116: // F5\n                    if (!wide.curNode || !tree.isDir()) {\n                        return false;\n                    }\n\n                    tree.refresh(wide.curNode);\n\n                    break;\n            }\n        });\n    },\n    _bindDocument: function () {\n        var hotKeys = this.defaultKeyMap;\n        $(document).keydown(function (event) {\n            if (event.ctrlKey === hotKeys.goEditor.ctrlKey\n                    && event.which === hotKeys.goEditor.which) {  // Ctrl-0 \n                hotKeys.goEditor.fun();\n                event.preventDefault();\n\n                return;\n            }\n\n            if (event.ctrlKey === hotKeys.goFileTree.ctrlKey\n                    && event.which === hotKeys.goFileTree.which) { // Ctrl-1 \n                hotKeys.goFileTree.fun();\n                event.preventDefault();\n\n                return;\n            }\n\n            if (event.ctrlKey === hotKeys.goOutline.ctrlKey\n                    && event.which === hotKeys.goOutline.which) { // Ctrl-2 \n                hotKeys.goOutline.fun();\n                event.preventDefault();\n\n                return;\n            }\n\n            if (event.ctrlKey === hotKeys.goOutput.ctrlKey\n                    && event.which === hotKeys.goOutput.which) { // Ctrl-4    \n                hotKeys.goOutput.fun();\n                event.preventDefault();\n\n                return;\n            }\n\n            if (event.ctrlKey === hotKeys.goSearch.ctrlKey\n                    && event.which === hotKeys.goSearch.which) { // Ctrl-5   \n                hotKeys.goSearch.fun();\n                event.preventDefault();\n\n                return;\n            }\n\n            if (event.ctrlKey === hotKeys.goNotification.ctrlKey\n                    && event.which === hotKeys.goNotification.which) { // Ctrl-6   \n                hotKeys.goNotification.fun();\n                event.preventDefault();\n\n                return;\n            }\n\n            if (event.ctrlKey === hotKeys.closeCurEditor.ctrlKey\n                    && event.which === hotKeys.closeCurEditor.which) {  // Ctrl-Q    \n                $(\".edit-panel .tabs > div.current\").find(\".ico-close\").click();\n                event.preventDefault();\n\n                return;\n            }\n\n            if (event.ctrlKey === hotKeys.changeEditor.ctrlKey\n                    && event.which === hotKeys.changeEditor.which) { // Ctrl-D \n                if (document.activeElement.className === \"notification\"\n                        || document.activeElement.className === \"output\"\n                        || document.activeElement.className === \"search\") {\n                    // \n                    var tabs = [\"output\", \"search\", \"notification\"],\n                            nextPath = \"\";\n                    for (var i = 0, ii = tabs.length; i < ii; i++) {\n                        if (bottomGroup.tabs.getCurrentId() === tabs[i]) {\n                            if (i < ii - 1) {\n                                nextPath = tabs[i + 1];\n                            } else {\n                                nextPath = tabs[0];\n                            }\n                            break;\n                        }\n                    }\n                    bottomGroup.tabs.setCurrent(nextPath);\n                    $(\".bottom-window-group .\" + nextPath).focus();\n\n                    event.preventDefault();\n\n                    return false;\n                }\n\n                if (editors.data.length > 1) {\n                    var nextPath = \"\";\n                    for (var i = 0, ii = editors.data.length; i < ii; i++) {\n                        var currentId = editors.getCurrentId();\n                        if (currentId) {\n                            if (currentId === editors.data[i].id) {\n                                if (i < ii - 1) {\n                                    nextPath = editors.data[i + 1].id;\n                                    wide.curEditor = editors.data[i + 1].editor;\n                                } else {\n                                    nextPath = editors.data[0].id;\n                                    wide.curEditor = editors.data[0].editor;\n                                }\n                                break;\n                            }\n                        }\n                    }\n\n                    editors.tabs.setCurrent(nextPath);\n                    var nextTId = tree.getTIdByPath(nextPath);\n                    wide.curNode = tree.fileTree.getNodeByTId(nextTId);\n\n                    tree.fileTree.selectNode(wide.curNode);\n                    wide.refreshOutline();\n                    var cursor = wide.curEditor.getCursor();\n                    $(\".footer .cursor\").text('|   ' + (cursor.line + 1) + ':' + (cursor.ch + 1) + '   |');\n                    wide.curEditor.focus();\n                }\n\n                event.preventDefault();\n\n                return false;\n            }\n\n            if (event.which === hotKeys.build.which) { // F5 Build\n                menu.build();\n                event.preventDefault();\n\n                return;\n            }\n\n            if (event.which === hotKeys.buildRun.which) { // F6 Build & Run\n                menu.run();\n                event.preventDefault();\n\n                return;\n            }\n\n            if (event.ctrlKey === hotKeys.goFile.ctrlKey\n                    && event.altKey === hotKeys.goFile.altKey\n                    && event.shiftKey === hotKeys.goFile.shiftKey\n                    && event.which === hotKeys.goFile.which) { // Shift-Alt-O \n                $(\"#dialogGoFilePrompt\").dialog(\"open\");\n            }\n        });\n    },\n    init: function () {\n        this._bindFileTree();\n        this._bindOutput();\n        this._bindDocument();\n    }\n};","/*\n * Copyright (c) 2014-2018, b3log.org & hacpai.com\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * @file bottomGroup.js\n *\n * @author <a href=\"http://vanessa.b3log.org\">Liyuan Li</a>\n * @author <a href=\"http://88250.b3log.org\">Liang Ding</a>\n * @version 1.1.1.1, Mar 15, 2017\n */\nvar bottomGroup = {\n    tabs: undefined,\n    searchTab: undefined,\n    init: function () {\n        this._initTabs();\n        this._initFrame();\n\n        $('.bottom-window-group .output').click(function () {\n            $(this).focus();\n        });\n\n        $('.bottom-window-group .output').on('click', '.path', function (event) {\n            var $path = $(this),\n                    tId = tree.getTIdByPath($path.data(\"path\"));\n            tree.openFile(tree.fileTree.getNodeByTId(tId),\n                    CodeMirror.Pos($path.data(\"line\") - 1, $path.data(\"column\") - 1));\n            event.preventDefault();\n            return false;\n        });\n    },\n    _initFrame: function () {\n        $(\".bottom-window-group .output\").parent().mouseup(function (event) {\n            event.stopPropagation();\n\n            if (event.button === 0) { // \n                $(\".bottom-window-group .frame\").hide();\n                return;\n            }\n\n            // event.button === 2 \n            var left = event.screenX,\n                    $it = $(this);\n            if ($(\".side\").css(\"left\") === \"auto\" || $(\".side\").css(\"left\") === \"0px\") {\n                left = event.screenX - $(\".side\").width();\n            }\n            $(\".bottom-window-group .frame\").show().css({\n                \"left\": left + \"px\",\n                \"top\": (event.offsetY + event.target.offsetTop - $it.scrollTop() - 10) + \"px\"\n            });\n            return;\n        });\n    },\n    clear: function (id) {\n        $('.bottom-window-group .' + id + ' > div').text('');\n    },\n    resetOutput: function () {\n        this.clear('output');\n        bottomGroup.tabs.setCurrent(\"output\");\n        windows.flowBottom();\n    },\n    _initTabs: function () {\n        this.tabs = new Tabs({\n            id: \".bottom-window-group\",\n            clickAfter: function (id) {\n                this._$tabsPanel.find(\".\" + id).focus();\n            }\n        });\n    },\n    fillOutput: function (data) {\n        var $output = $('.bottom-window-group .output');\n\n        data = data.replace(/\\r/g, '');\n        data = data.replace(/\\n/g, '<br/>');\n\n        if (-1 !== data.indexOf(\"<br/>\")) {\n            data = Autolinker.link(data);\n        }\n\n        $output.find(\"div\").html(data);\n        $output.parent().scrollTop($output[0].scrollHeight);\n    }\n};\n"]}